<!DOCTYPE html>
<html>
 <head>
  <title>
   API v8.5  Changes – Layar Developer Documentation
  </title>
  <meta charset="utf-8"/>
  <meta content="" name="description"/>
  <link href="https://d2nd2hlya8il3c.cloudfront.net/static/favicon.008a69ff80a7.png" rel="icon"/>
  <link href="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/css/base.8a1b3d2c89f8.css" rel="stylesheet"/>
  <link href="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/css/documentation.f81faeb73433.css" rel="stylesheet"/>
  <!--[if lte IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"></script>
    <![endif]-->
  <!-- ♥ -->
 </head>
 <body data-syntaxhighligher-base-url="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/js/jquery-syntaxhighlighter">
  <header>
   <div class="header-wrap">
    <h1>
     <a class="hide-text" href="/documentation/">
      Layar Developer Documentation
     </a>
    </h1>
    <a class="back" href="/">
     <span>
      ◀
     </span>
     Back to layar.com
    </a>
   </div>
  </header>
  <div class="wrap">
   <nav class="main">
    <ul>
     <li class="selected">
      <a href="/documentation/browser/">
       API &amp; Platform
      </a>
     </li>
     <li>
      <a href="/documentation/connect/">
       Connect
      </a>
     </li>
     <li>
      <a href="/documentation/layar-sdk/">
       SDK
      </a>
     </li>
    </ul>
    <form action="//www.google.com/search" class="search" method="GET">
     <input name="sitesearch" type="hidden" value="layar.com/documentation"/>
     <input name="q" placeholder="Search in documentation…" required="required" type="text"/>
     <button class="hide-text" type="submit">
      Submit
     </button>
    </form>
   </nav>
   <aside class="side-nav">
    <nav>
     <ul>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/layar-platform-overview/">
        Layar Platform Overview
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/layar-platform-overview/layer-service-provider/">
          Layer Service Provider
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/layar-platform-overview/terminology/">
          Terminology
         </a>
        </li>
       </ul>
      </li>
      <li class="child-selected">
       <span class="in-out">
       </span>
       <a href="/documentation/browser/api/">
        API Documentation
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/api/getpois-request/">
          GetPOIs Request
         </a>
        </li>
        <li class="child-selected">
         <span class="in-out">
         </span>
         <a href="/documentation/browser/api/getpois-response/">
          GetPOIs Response
         </a>
         <ul>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/changes-84/">
            API v8.4 Changes
           </a>
          </li>
          <li class="selected">
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/api-v85-changes/">
            API v8.5  Changes
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/hotspots/">
            hotspots
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/objects/">
            object
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/actions/">
            actions
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/animations/">
            animations
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/api/getpois-response/referenceimages/">
            reference Images
           </a>
          </li>
         </ul>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/api/layar-intent/">
          Layar Intent
         </a>
        </li>
       </ul>
      </li>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/publishing-site/">
        Publishing Site
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/publishing-site/test-layer/">
          Test a Layer
         </a>
         <ul>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/publishing-site/test-layer/layer-testing-instructions/">
            layer testing instructions
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/publishing-site/test-layer/best-practices-cool-layers/">
            best practices for creating cool layers
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/howtos/">
        HowTo's
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/layar-vision-doc/">
          Layar Vision
         </a>
         <ul>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/howtos/layar-vision-doc/enable-layar-vision-layer/">
            Enable Layar Vision in a layer
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/howtos/layar-vision-doc/page-best-practices/">
            Page best practices
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/howtos/layar-vision-doc/layar-vision-faqs/">
            Layar Vision FAQs
           </a>
          </li>
         </ul>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/html-widgets/">
          HTML widgets
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/geolocation-layer/">
          Geo Layer
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/how-to-actions/">
          Actions
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/2d-and-3d-objects/">
          2D and 3D objects
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/filter-settings/">
          Filter settings
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/user-authentication/">
          User Authentication
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/sharing-screenshot-developer-defined-url/">
          Sharing a screenshot to a developer defined URL
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/howtos/oauth-signing/">
          OAuth signing
         </a>
        </li>
       </ul>
      </li>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/3d-content-creation/">
        3D Content Creation
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/">
          3D Model Converter
         </a>
         <ul>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/how-to-use-3d-model-converter/">
            How to Use 3D Model Converter
           </a>
           <ul>
            <li>
             <span class="in-out">
             </span>
             <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/how-to-use-3d-model-converter/editing-opacity-blending-and-shader/">
              editing opacity, blending and shader
             </a>
            </li>
            <li>
             <span class="in-out">
             </span>
             <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/how-to-use-3d-model-converter/create-texture-animated-3d-models/">
              create texture animated 3D models
             </a>
            </li>
            <li>
             <span class="in-out">
             </span>
             <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/how-to-use-3d-model-converter/positioning-3d-model/">
              positioning  3D model
             </a>
            </li>
           </ul>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/3d-content-creation/3d-model-converter-copy/model-converter-release-history/">
            Model Converter Release History
           </a>
          </li>
         </ul>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/3d-content-creation/blender-addon/">
          Blender add-on
         </a>
        </li>
       </ul>
      </li>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/tutorials-tools/">
        Tutorials &amp; Tools
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/create-simple-vision-layer/">
          Create a simple vision layer
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/create-simple-geo-location-layer/">
          Create a simple Geo-location layer
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/layer-with-actions/">
          Layer with Actions
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/layer-1d-icons-2d-images-and-3d-objects/">
          Layer with 1d icons, 2d images and 3d objects
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/layer-filter-settings/">
          layer with filter settings
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/placing-pois-evenly-relative-users-current-location/">
          Placing POis evenly relative to user's current location
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/add-animations-layer/">
          Add animations to a layer
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/implement-user-authentication-layer/">
          Implement user authentication in a layer
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/tutorials-tools/third-party/">
          Third Party Tutorials &amp; Tools
         </a>
        </li>
       </ul>
      </li>
      <li>
       <span class="in-out">
       </span>
       <a href="/documentation/browser/archived/">
        Archived
       </a>
       <ul>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/archived/changes-83/">
          API v8.3 Changes
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/archived/getpois-response/">
          GetPOIs Response v7.1
         </a>
         <ul>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/archived/getpois-response/hotspots/">
            hotspots
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/archived/getpois-response/actions/">
            actions
           </a>
          </li>
          <li>
           <span class="in-out">
           </span>
           <a href="/documentation/browser/archived/getpois-response/animations/">
            animations
           </a>
          </li>
         </ul>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/archived/changes-71/">
          API v7.1 Changes
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/archived/api-v70-changes/">
          API v7.0 Changes
         </a>
        </li>
        <li>
         <span class="in-out">
         </span>
         <a href="/documentation/browser/archived/getpois-response-v62/">
          GetPOIs Response v6.2
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </nav>
   </aside>
   <article>
    <h1>
     API v8.5  Changes
    </h1>
    <p class="g-notice-yellow">
     NOTE: These are the changes in Developer API v8.5. It is supported in Layar client and LayarSDK v8.5 (and above) on both Android and iPhone.
    </p>
    <h5>
     In Layar API v8.5 we added the following features:
    </h5>
    <h2>
     GetPOIs response change
    </h2>
    <h2>
     Event Handlers
    </h2>
    <p>
     Layar 8.5 introduces the concept of event handlers to the Layar API, which allows actions or POI updates to be triggered after certain events. This enables developers to add more complex functionality to their experiences, e.g. sequencing of videos, but also dynamic content without server interaction.
    </p>
    <ul>
     <li>
      <a href="#eventTypes">
       Event Types
      </a>
     </li>
     <li>
      <a href="#eventHandlersO">
       Event Handler object
      </a>
     </li>
     <li>
      <a href="#global">
       Global event handler registry
      </a>
     </li>
    </ul>
    <h2 id="eventHandlers" style="color: rgb(68, 68, 68); font-size: 1.6em; font-family: Arial, Verdana, sans-serif;">
     Event Types
    </h2>
    <p>
     The following event types are defined on the hotspots 'object' element:
    </p>
    <ul>
     <li>
      <strong>
       onLoad
      </strong>
      Triggered when the object has been loaded successfully (Similar as onCreate)
     </li>
     <li>
      <strong>
       onClick
      </strong>
      Triggered when the object has been clicked (similar behaviour as the POI action)
     </li>
     <li>
      <strong>
       onPlaybackStart
      </strong>
      Triggered when the video or audio object playback started
     </li>
     <li>
      <strong>
       onPlaybackFinish
      </strong>
      Triggered when the video or audio object playback finished
     </li>
    </ul>
    <div>
     API syntax:
    </div>
    <div class="sites-codeblock sites-codesnippet-block" style="background-color: rgb(239, 239, 239); border: 1px solid rgb(211, 211, 211); padding: 0.5em 0px 0.5em 1em; line-height: 1;">
     <pre><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">"object:" {</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">    "url": "...",</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">    "contentType": "image/png",</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">    "size": 1.0,</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">    "onClick": {</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">        "action": {</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">            "contentType": "application/vnd.layar.internal",</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">            "uri": "layar://[layername]/?parameters"</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">        }</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">    }</code><br style="color: rgb(68, 68, 68); font-family: Arial, Verdana, sans-serif; font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;"/><code style="color: rgb(0, 96, 0); font-size: 13.3333px; font-weight: normal; line-height: 13.3333px; white-space: normal;">}</code></pre>
    </div>
    <h2 id="eventHandlerO" style="color: rgb(68, 68, 68); font-size: 1.6em; font-family: Arial, Verdana, sans-serif;">
     Event Handler object
    </h2>
    <p>
     The event handler object tied to an event is a simple JSON dictionary with 3 optional attributes.
    </p>
    <table id="hotspots-id">
     <caption>
      Event Object
     </caption>
     <tbody>
      <tr>
       <th>
        <strong>
         Attribute name
        </strong>
       </th>
       <th style="width: 100%;">
        <strong>
         Attribute name
        </strong>
       </th>
      </tr>
      <tr>
       <td>
        action
       </td>
       <td>
        Action to be executed the moment the event is triggered. Follow the same syntax as the hotspots '
        <a href="https://www.layar.com/documentation/browser/api/getpois-response/actions/" title="actions">
         actions
        </a>
        ' attribute.
       </td>
      </tr>
      <tr>
       <td>
        update
       </td>
       <td>
        The update attribute can be used to perform a POI update without requiring a server call.
       </td>
      </tr>
      <tr>
       <td>
        handler
       </td>
       <td>
        String value referring to another event handler registered in the global event handler registry.
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     An event handler should have at minimum one of these attributes, but can have more. If it defines more, all actions are triggered. This allows us to update POIs, but still do an async server call to notify the backend of the event.
    </p>
    <table id="hotspots-id">
     <caption>
      update object
     </caption>
     <tbody>
      <tr>
       <th>
        <strong>
         Attribute name
        </strong>
       </th>
       <th style="width: 100%;">
        <strong>
         Attribute name
        </strong>
       </th>
      </tr>
      <tr>
       <td>
        hotspots
       </td>
       <td>
        Array of hotspots that need to be added/updated
       </td>
      </tr>
      <tr>
       <td>
        deleted_hotspots
       </td>
       <td>
        Array of hotspot ids that need to be deleted
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     The update object allows us to add/update hotspots dynamically as a result of a triggered event without having to rely on server calls. The app handles this as if we would have received a getPOIrequest response with fullRefresh="false".
    </p>
    <div>
     API syntax:
    </div>
    <div class="sites-codeblock sites-codesnippet-block" style="background-color: rgb(239, 239, 239); border: 1px solid rgb(211, 211, 211); padding: 0.5em 0px 0.5em 1em; line-height: 1;">
     <code style="color: rgb(0, 96, 0); font-size: 13.3333px; line-height: 13.3333px; white-space: normal;">
      "object": {
      <br/>
      "url": "...",
      <br/>
      "contentType": "image/jpeg",
      <br/>
      "size": 1.0,
      <br/>
      "onClick": {
      <br/>
      "update": {
      <br/>
      "hotspots": [
      <br/>
      {
      <br/>
      "id": "poiToUpdate",
      <br/>
      ...
      <br/>
      }
      <br/>
      ],
      <br/>
      "deletedHotspots": ["poiId1ToDelete", "poiId2ToDelete"]
      <br/>
      }
      <br/>
      }
      <br/>
      }
      <br/>
     </code>
    </div>
    <h2 id="global" style="color: rgb(68, 68, 68); font-size: 1.6em; font-family: Arial, Verdana, sans-serif;">
     Global Event Handler Registry
    </h2>
    <p>
     At the root level of a getPOIs response a new attribute named 'handlers' is added. The value of this attribute is a JSON dict. This allows the developer to specify event handlers at a global level so they can be reused by different POI objects. This also allows us to have more advanced functionality like toggles.
    </p>
    <div>
     Example:
    </div>
    <div class="sites-codeblock sites-codesnippet-block" style="background-color: rgb(239, 239, 239); border: 1px solid rgb(211, 211, 211); padding: 0.5em 0px 0.5em 1em; line-height: 1;">
     <code style="color: rgb(0, 96, 0); font-size: 13.3333px; line-height: 13.3333px; white-space: normal;">
      "hotspots": [{
      <br/>
      "id": "door",
      <br/>
      "object:" {
      <br/>
      ...
      <br/>
      "onClick": {
      <br/>
      "handler": "open_door"
      <br/>
      }
      <br/>
      ...   }}],
      <br/>
      "handlers": {
      <br/>
      "open_door": {
      <br/>
      "update": {
      <br/>
      "hotspots": [{
      <br/>
      "id": "door",
      <br/>
      "object": {
      <br/>
      ...
      <br/>
      "onClick": {
      <br/>
      "handler": "close_door"
      <br/>
      }
      <br/>
      ...
      <br/>
      }
      <br/>
      }]
      <br/>
      }
      <br/>
      },
      <br/>
      "close_door": {
      <br/>
      "update": {
      <br/>
      "hotspots": [{
      <br/>
      "id": "door",
      <br/>
      "object": {
      <br/>
      ...
      <br/>
      "onClick": {
      <br/>
      "handler": "open_door"
      <br/>
      }
      <br/>
      ...
      <br/>
      }
      <br/>
      }]
      <br/>
      }
      <br/>
      }
      <br/>
      }
     </code>
    </div>
    <div class="related">
     <h3>
      Related topics
     </h3>
     <p>
      <a href="">
       testing
      </a>
     </p>
    </div>
   </article>
  </div>
  <footer>
   <span class="copyright">
    © 2017 Layar, All Rights Reserved
   </span>
   <a class="feedback" href="http://devsupport.layar.com/">
    Dev Support
   </a>
  </footer>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js">
  </script>
  <script src="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/js/jqbrowser.5d3867015613.js">
  </script>
  <script src="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/js/jquery-syntaxhighlighter/js/jquery-syntaxhighlighter.min.be0a493e40d1.js">
  </script>
  <script src="https://d2nd2hlya8il3c.cloudfront.net/static/documentation/js/documentation.a223dad8bb9b.js">
  </script>
  <!-- Google Tag Manager -->
  <noscript>
   <iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-WC63SX" style="display:none;visibility:hidden" width="0">
   </iframe>
  </noscript>
  <script>
   (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WC63SX');
  </script>
  <!-- End Google Tag Manager -->
 </body>
</html>