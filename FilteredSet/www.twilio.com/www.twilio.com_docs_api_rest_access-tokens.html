<!DOCTYPE html>
<html class="no-js">
 <head>
  <script>
   var twilio = twilio || {};
  twilio.environment = "prod";
  twilio.SWIFTYPE_ENGINE_KEY = "T68bXEBf7NaKzyRpvbnG";
  </script>
  <script>
   twilio.account = twilio.account || {};
  

  twilio.user = twilio.user || {};
  </script>
  <script>
   window.userBetaFeatures = ["marketplace", "enable-video-rooms", "api.fax.v1", "api.messaging.next-gen", "clear-large-cookies", "debugger-webhook"];
  </script>
  <!-- Optimizely -->
  <script class="sl_notranslate" type="text/javascript">
   function __cleanup_cookies() {
      var toClear = ['optimizelySegments', 'optimizelyEndUserId', 'optimizelyPendingLogEvents', 'optimizelyBuckets'];
      var exp = (new Date()).toUTCString();
      toClear.forEach(function (key) {
        document.cookie = key + '=z; path=/; domain=.twilio.com; expires=' + exp;
      });
    }

    document.addEventListener("DOMContentLoaded", __cleanup_cookies);
    window['optimizely'] = window['optimizely'] || [];
    window['optimizely'].push(['setCookieDomain', 'www.twilio.com']);
  </script>
  <script src="https://cdn.optimizely.com/js/6082066.js">
  </script>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <meta content="chrome=1" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Twilio API: Access Tokens - Twilio
  </title>
  <link href="https://www.twilio.com/docs/api/rest/access-tokens" rel="canonical"/>
  <link href="/docs/static/img/favicons/favicon.db41f19ea294.ico" rel="shortcut icon"/>
  <link href="/docs/static/img/favicons/favicon_57.98200b6899e6.png" rel="apple-touch-icon"/>
  <link href="/docs/static/img/favicons/favicon_72.86ae17486256.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="/docs/static/img/favicons/favicon_114.ee1859950ad4.png" rel="apple-touch-icon" sizes="114x114"/>
  <link href="//cloud.typography.com/6230892/752864/css/fonts.css" rel="stylesheet" type="text/css"/>
  <link href="/docs/static/css/font-awesome.min.295235b28b6e.css" rel="stylesheet"/>
  <link href="/docs/static/css/devicon.min.b59428a9ab8a.css" rel="stylesheet"/>
  <link href="/docs/static/css/twilio-icons.45de73e993f2.css" rel="stylesheet"/>
  <link href="/docs/static/css/font-mfizz.818f36cb00cc.css" rel="stylesheet"/>
  <meta content="Twilio API: Access Tokens" property="og:title"/>
  <meta content="https://www.twilio.com/docs/api/rest/access-tokens?utm_source=docs&amp;utm_medium=social&amp;utm_campaign=guides_tags" property="og:url"/>
  <meta content="Twilio API: Access Tokens" name="twitter:title"/>
  <link href="/docs/static/css/docs.min.838d3077987f.css" rel="stylesheet"/>
 </head>
 <body class=" apireference ">
  <!-- Google Tag Manager -->
  <noscript>
   <iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-MWRD6S" style="display:none;visibility:hidden" width="0">
   </iframe>
  </noscript>
  <script>
   (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window, document, 'script', 'dataLayer', 'GTM-MWRD6S');
  </script>
  <!-- End Google Tag Manager -->
  <div class="block-raw_html">
   <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500|Source+Sans+Pro:600" rel="stylesheet" type="text/css"/>
   <style type="text/css">
    @font-face{font-family:brandon-grotesque;src:url(https://use.typekit.net/af/87035b/0000000000000000000132df/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/87035b/0000000000000000000132df/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/87035b/0000000000000000000132df/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;}@font-face{font-family:brandon-grotesque;src:url(https://use.typekit.net/af/37f12c/0000000000000000000132e3/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/37f12c/0000000000000000000132e3/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/37f12c/0000000000000000000132e3/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:brandon-grotesque;src:url(https://use.typekit.net/af/a7d2be/0000000000000000000132e1/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff2"),url(https://use.typekit.net/af/a7d2be/0000000000000000000132e1/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff"),url(https://use.typekit.net/af/a7d2be/0000000000000000000132e1/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("opentype");font-weight:500;font-style:normal;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/269954/0000000000000000000179d5/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/269954/0000000000000000000179d5/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/269954/0000000000000000000179d5/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/8d809e/0000000000000000000179cd/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n3&v=3) format("woff2"),url(https://use.typekit.net/af/8d809e/0000000000000000000179cd/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n3&v=3) format("woff"),url(https://use.typekit.net/af/8d809e/0000000000000000000179cd/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n3&v=3) format("opentype");font-weight:300;font-style:normal;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/9b5d7b/0000000000000000000179cf/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/9b5d7b/0000000000000000000179cf/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/9b5d7b/0000000000000000000179cf/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/6c7408/0000000000000000000179d1/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff2"),url(https://use.typekit.net/af/6c7408/0000000000000000000179d1/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff"),url(https://use.typekit.net/af/6c7408/0000000000000000000179d1/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("opentype");font-weight:500;font-style:normal;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/8362a7/0000000000000000000179d0/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/8362a7/0000000000000000000179d0/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/8362a7/0000000000000000000179d0/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/73096a/0000000000000000000179ce/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i3&v=3) format("woff2"),url(https://use.typekit.net/af/73096a/0000000000000000000179ce/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i3&v=3) format("woff"),url(https://use.typekit.net/af/73096a/0000000000000000000179ce/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i3&v=3) format("opentype");font-weight:300;font-style:italic;}@font-face{font-family:source-code-pro;src:url(https://use.typekit.net/af/bcf7cd/0000000000000000000179d2/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff2"),url(https://use.typekit.net/af/bcf7cd/0000000000000000000179d2/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff"),url(https://use.typekit.net/af/bcf7cd/0000000000000000000179d2/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("opentype");font-weight:500;font-style:italic;}
   </style>
   <style type="text/css">
    .signal-violator {
    background: #101010;
    color: #ffffff;
    text-align: center;
    padding: 24px 12px 30px;
    text-transform: uppercase;
    font-weight: 500;
    font-size: 16px;
    letter-spacing: 2px;
    position: relative;
    z-index: 100;
    font-family: 'Source Sans Pro', sans-serif; }
    @media screen and (min-width: 480px) {
      .signal-violator {
        font-size: 19px; } }
    @media screen and (min-width: 768px) {
      .signal-violator {
        padding: 20px 0; } }
    @media screen and (min-width: 960px) {
      .signal-violator {
        font-size: 20px; } }
    .signal-violator__wrapper {
      max-width: 1084px;
      margin: 0 auto;
      padding: 0 20px; }
      .signal-violator__wrapper:after {
        visibility: hidden;
        display: block;
        font-size: 0;
        content: " ";
        clear: both;
        height: 0; }
    .signal-violator__details {
      line-height: 29px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -o-font-smoothing: antialiased;
      color: #ffffff;
      display: block; }
      .signal-violator__details small {
        text-transform: lowercase;
        font-size: 100%;
        font-style: italic; }
      @media screen and (min-width: 1044px) {
        .signal-violator__details {
          float: left;
          margin: -2px 0 0; } }
      .signal-violator__details:hover {
        color: #ffffff;
        text-decoration: none; }
    .signal-violator__logo {
      display: block;
      width: 168px;
      height: 0;
      overflow: hidden;
      padding-top: 29px;
      background: url(https://www.twilio.com/marketing/bundles/archetype/img/logo-signal-violator.svg) center left/auto 18px no-repeat transparent;
      margin: 0 auto 5px; }
      @media screen and (min-width: 720px) {
        .signal-violator__logo {
          display: inline-block;
          margin: 0;
          vertical-align: top; } }
    .signal-violator__separator {
      display: none;
      line-height: 29px;
      vertical-align: top;
      margin: 0 15px; }
      @media screen and (min-width: 720px) {
        .signal-violator__separator {
          display: inline-block; } }
    .signal-violator__date, .signal-violator__location {
      vertical-align: top; }
      @media screen and (min-width: 720px) {
        .signal-violator__date, .signal-violator__location {
          display: inline-block; } }
    .signal-violator__location {
      line-height: 20px;
      display: block; }
      .signal-violator__location span {
        display: inline-block; }
      @media screen and (min-width: 430px) {
        .signal-violator__location {
          line-height: inherit; } }
      @media screen and (min-width: 720px) {
        .signal-violator__location {
          display: inline-block; } }
    .signal-violator__cta {
      font-weight: 400;
      font-size: 13px;
      letter-spacing: 1px;
      margin-top: 10px;
      font-family: 'Source Code Pro', monospace;
      color: #ffffff;
      display: block; }
      @media screen and (min-width: 480px) {
        .signal-violator__cta {
          font-size: 14px;
          margin-top: 16px; } }
      @media screen and (min-width: 1044px) {
        .signal-violator__cta {
          float: right;
          margin: 0; } }
      .signal-violator__cta:hover {
        color: #ffffff;
        text-decoration: none; }
      .signal-violator__cta-aside {
        display: block;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -o-font-smoothing: antialiased; }
        @media screen and (min-width: 480px) {
          .signal-violator__cta-aside {
            display: inline-block; } }
      .signal-violator__cta-button {
        background: none #FFE000;
        color: #101010;
        display: block;
        max-width: 160px;
        padding: 0 8px;
        margin: 4px auto 0;
        line-height: 27px; }
        @media screen and (min-width: 480px) {
          .signal-violator__cta-button {
            display: inline-block;
            margin: 0 0 0 15px; } }
        .signal-violator__cta-button:hover {
          text-decoration: none;
          background: #ffffff; }
      .signal-violator__cta strong {
        font-weight: 700; }
   </style>
   <div class="signal-violator">
    <div class="signal-violator__wrapper">
     <a class="signal-violator__details" href="/signal">
      <span class="signal-violator__logo">
       SIGNAL
      </span>
      <span class="signal-violator__separator">
       /
      </span>
      <span class="signal-violator__location">
       The developer conference
       <span>
        <small>
         by
        </small>
        Twilio
       </span>
      </span>
     </a>
     <a class="signal-violator__cta" href="/signal/register">
      <aside class="signal-violator__cta-aside">
       30% off sale extended
      </aside>
      <span class="signal-violator__cta-button">
       $695 until 5/6
      </span>
     </a>
    </div>
   </div>
  </div>
  <div class="nav__drawer" role="drawer">
   <div class="nav__drawer-wrapper" role="drawer__wrapper">
    <div class="nav__drawer-nav" role="drawer__nav">
     <span class="nav__drawer-auth">
      <a class="nav__drawer-auth-link" href="/login">
       Log In
      </a>
      <a class="nav__drawer-auth-link" href="/try-twilio">
       Sign Up
      </a>
     </span>
     <a class="nav__drawer-close" href="#close" role="drawer__close">
      Close
     </a>
    </div>
    <div class="nav__drawer-menu">
     <div class="nav__drawer-container">
      <div class="nav__drawer-grid">
       <div class="nav__drawer-section">
        <div class="nav__drawer-header" role="drawer__header">
         Products
        </div>
        <div class="nav__drawer-dropdown" role="drawer__dropdown">
         <div class="nav__drawer-column">
          <ul>
           <li>
            <a class="nav__drawer-link nav__drawer-link--category" href="/voice-video">
             Voice &amp; Video
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/voice">
             Programmable Voice
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/video">
             Programmable Video
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/sip-trunking">
             Elastic SIP Trunking
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/taskrouter">
             TaskRouter
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/stun-turn">
             Network Traversal
            </a>
           </li>
          </ul>
          <ul>
           <li>
            <a class="nav__drawer-link nav__drawer-link--category" href="/messaging">
             Messaging
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/sms">
             Programmable SMS
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/chat">
             Programmable Chat
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/fax">
             Programmable Fax
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/notify">
             Notify
            </a>
           </li>
          </ul>
         </div>
         <div class="nav__drawer-column">
          <ul>
           <li>
            <div class="nav__drawer-link nav__drawer-link--category">
             Authentication
            </div>
           </li>
           <li>
            <a class="nav__drawer-link" href="/two-factor-authentication">
             Two-factor Authentication
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/verification">
             Verification
            </a>
           </li>
          </ul>
          <ul>
           <li>
            <div class="nav__drawer-link nav__drawer-link--category">
             Connectivity
            </div>
           </li>
           <li>
            <a class="nav__drawer-link" href="/lookup">
             Lookup
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/phone-numbers">
             Phone Numbers
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/wireless">
             Programmable Wireless
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/sync">
             Sync
            </a>
           </li>
          </ul>
          <ul>
           <li>
            <div class="nav__drawer-link nav__drawer-link--category">
             Marketplace
            </div>
           </li>
           <li>
            <a class="nav__drawer-link" href="/marketplace/add-ons">
             Add-ons
            </a>
           </li>
          </ul>
          <ul>
           <li>
            <div class="nav__drawer-link nav__drawer-link--category">
             Platform
            </div>
           </li>
           <li>
            <a class="nav__drawer-link" href="/enterprise">
             Enterprise Plan
            </a>
           </li>
           <li>
            <a class="nav__drawer-link" href="/interconnect">
             Interconnect
            </a>
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="nav__drawer-section">
        <div class="nav__drawer-header" role="drawer__header">
         Use Cases
        </div>
        <div class="nav__drawer-dropdown" role="drawer__dropdown">
         <ul>
          <li>
           <a class="nav__drawer-link nav__drawer-link--category" href="/use-cases/access-security">
            Access Security
           </a>
          </li>
          <li>
           <a class="nav__drawer-link nav__drawer-link--category" href="/use-cases/call-and-text-marketing">
            Call &amp; Text Marketing
           </a>
          </li>
          <li>
           <a class="nav__drawer-link nav__drawer-link--category" href="/use-cases/collaboration">
            Collaboration
           </a>
          </li>
          <li>
           <a class="nav__drawer-link nav__drawer-link--category" href="/use-cases/commerce-communications">
            Commerce Communications
           </a>
          </li>
          <li>
           <a class="nav__drawer-link nav__drawer-link--category" href="/use-cases/contact-center">
            Contact Center
           </a>
          </li>
         </ul>
         <hr/>
        </div>
        <div>
         <div class="nav__drawer-column">
          <ul>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="https://customers.twilio.com">
             Customer Stories
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/learn">
             Learn
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/showcase">
             Partner Showcase
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/what-is-cloud-communications?">
             Why Twilio?
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/support-plans">
             Support Plans
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="http://status.twilio.com">
             Status
            </a>
           </li>
          </ul>
         </div>
         <div class="nav__drawer-column">
          <ul>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/docs">
             API &amp; Docs
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/blog">
             Blog
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/help">
             Help
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/security">
             Security
            </a>
           </li>
           <li>
            <a class="nav__drawer-link nav__drawer-link--small" href="/company/jobs">
             Jobs at Twilio
            </a>
           </li>
          </ul>
         </div>
        </div>
        <div class="nav__sales">
         <a class="nav__sales-button" href="/help/sales">
          Talk to Sales
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="nav nav--subnav nav--inverted nav--transparent " data-subnav-length="40" role="nav">
   <div class="nav__header" role="nav__menu">
    <div class="nav__title">
     <a class="nav__logo" href="/">
      Twilio
     </a>
    </div>
    <nav class="nav__menu">
     <ul class="nav__menu-items">
      <li class="nav__menu-item">
       <a class="nav__menu-link" href="https://support.twilio.com/hc/en-us">
        <svg height="13.5" viewBox="-130.2 48.3 5.9 13.5" width="5.9" xmlns="http://www.w3.org/2000/svg">
         <path d="M-127.5 60.8c0 .3-.2.5-.5.5s-.5-.2-.5-.5.2-.5.5-.5.5.2.5.5zm-2.2-9.6c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5c0 1-.5 1.5-1.3 2.2-.9.9-1.9 1.9-1.9 4.2m-.7-9.3" fill="none" stroke="#F22F46" stroke-miterlimit="10">
         </path>
        </svg>
        Help
       </a>
      </li>
      <li class="nav__menu-item">
       <a class="nav__menu-link" href="/login">
        <svg height="13.5" viewBox="0 0 10.2 13.5" width="10.2" xmlns="http://www.w3.org/2000/svg">
         <circle cx="5.1" cy="3" fill="none" r="2.5" stroke="#F22F46" stroke-miterlimit="10">
         </circle>
         <path d="M.5 13.5c0-2.5 2.1-4.6 4.6-4.6s4.6 2.1 4.6 4.6" fill="none" stroke="#F22F46" stroke-miterlimit="10">
         </path>
        </svg>
        Log In
       </a>
      </li>
      <li class="nav__menu-item">
       <a class="nav__menu-link" href="/try-twilio">
        <svg height="13" viewBox="0 0 13 13" width="13" xmlns="http://www.w3.org/2000/svg">
         <path d="M0 6.5h13M6.5 0v13" fill="none" stroke="#F22F46" stroke-miterlimit="10">
         </path>
        </svg>
        Sign Up
       </a>
      </li>
      <li class="nav__menu-item">
       <a class="nav__menu-link nav__menu-activate" href="#menu" role="nav__activate">
        <span>
        </span>
        Menu &amp; Products
       </a>
      </li>
     </ul>
    </nav>
    <nav class="nav__subnav" role="subnav">
     <header class="nav__subnav-header">
      <a class="nav__subnav-header-link" href="/docs">
       Docs
      </a>
      <a class="nav__subnav-link nav__subnav-current" href="/docs/api" role="subnav__dropdown">
       API Reference
      </a>
     </header>
     <ul class="nav__subnav-items" role="subnav__items">
      <li class="nav__subnav-item " role="subnav__item">
       <a class="nav__subnav-link" href="/docs/quickstart">
        Quickstart
       </a>
      </li>
      <li class="nav__subnav-item " role="subnav__item">
       <a class="nav__subnav-link" href="/docs/guides">
        Guides
       </a>
      </li>
      <li class="nav__subnav-item " role="subnav__item">
       <a class="nav__subnav-link" href="/docs/tutorials">
        Tutorials
       </a>
      </li>
      <li class="nav__subnav-item " role="subnav__item">
       <a class="nav__subnav-link" href="/docs/api">
        API Reference
       </a>
      </li>
      <li class="nav__subnav-item " role="subnav__item">
       <a class="nav__subnav-link" href="/docs/libraries">
        SDKs
       </a>
      </li>
     </ul>
    </nav>
   </div>
  </div>
  <div class="docs__pagenav">
   <div class="uk-container uk-container-center">
    <div class="uk-grid">
     <div class="uk-width-3-4 uk-hidden-small">
      <div class="breadcrumbs">
       <a href="/docs/api">
        API Reference
       </a>
       &gt;
       <a href="/docs/api/rest">
        Twilio REST API
       </a>
       &gt;
       <span>
        Twilio API: Access Tokens
       </span>
      </div>
     </div>
     <div class="uk-width-1-1 uk-width-medium-1-4">
      <div class="search">
       <form action="/docs/search" method="GET">
        <div class="wrapper">
         <input id="search-box" name="q" type="text" value=""/>
        </div>
        <button type="submit">
         <i class="fa fa-fw fa-search">
         </i>
        </button>
       </form>
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="docs-container">
   <div class="uk-container">
    <div class="coderail-container ">
     <div class="sidenav-column" id="sidenav-column">
      <div class="sidenav-sticky-content" data-uk-sticky="{boundary: true}">
       <div class="collapsible-content">
        <div class="theme-switcher uk-hidden-small">
         <div class="theme-wrapper">
          <a class="selected" data-theme="light">
           <i class="fa fa-fw fa-sun-o">
           </i>
          </a>
          <a data-theme="dark">
           <i class="fa fa-fw fa-moon-o">
           </i>
          </a>
         </div>
        </div>
        <div class="sidenav">
         <ul class="sidenav__section" data-swiftype-index="false" id="doc_menu">
          <!-- Page entries -->
          <li id="dynamic-menu">
           <ul>
            <li>
             <a href="/docs/api/rest">
              Twilio REST API
             </a>
            </li>
            <li class="menu-title" role="menu-title">
             <span class="heading">
              Using the API
             </span>
            </li>
            <ul class="menu-accordion" role="menu-accordion">
             <li>
              <a href="/docs/api/rest/request">
               Your Request to Twilio
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/response">
               Twilio's Response
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/making-calls">
               Make Calls
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/sending-messages">
               Send SMS &amp; MMS Messages
              </a>
             </li>
             <li data-beta-feature="api.messaging.next-gen">
              <a href="/docs/api/rest/messaging-services-and-copilot-overview">
               Messaging Services &amp; Copilot
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/sending-messages-copilot">
               Send Messages with Copilot
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/copilot-best-practices">
               Copilot Best Practices
              </a>
             </li>
            </ul>
            <li class="menu-title" role="menu-title">
             <span class="heading">
              Resources
             </span>
            </li>
            <ul class="menu-accordion" role="menu-accordion">
             <li>
              <a href="/docs/api/rest/account">
               Accounts
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/addresses">
               Addresses
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/keys">
               API Keys
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/applications">
               Applications (TwiML)
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/available-phone-numbers">
               Available Phone Numbers
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/rest-api-porting-phone-numbers">
               Porting Phone Numbers
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/call">
               Calls
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/call-feedback">
               Call Feedback
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/conference">
               Conferences
              </a>
             </li>
             <ul class="menu-accordion expanded">
              <li>
               <a href="/docs/api/rest/participant">
                Participants
               </a>
              </li>
             </ul>
             <li>
              <a href="/docs/api/rest/incoming-phone-numbers">
               Incoming Phone Numbers
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/messaging-services">
               Messaging Services
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/message">
               Messages
              </a>
             </li>
             <ul class="menu-accordion expanded">
              <li>
               <a href="/docs/api/rest/message/feedback">
                Feedback
               </a>
              </li>
              <li>
               <a href="/docs/api/rest/media">
                Media
               </a>
              </li>
             </ul>
             <li>
              <a href="/docs/api/rest/outgoing-caller-ids">
               Outgoing Caller IDs
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/queue">
               Queues
              </a>
             </li>
             <ul class="menu-accordion expanded">
              <li>
               <a href="/docs/api/rest/member">
                Members
               </a>
              </li>
             </ul>
             <li>
              <a href="/docs/api/rest/recording">
               Recordings
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/short-codes">
               Short Codes
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/token">
               Tokens (NAT Traversal)
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/transcription">
               Transcriptions
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/usage-records">
               Usage Records
              </a>
             </li>
            </ul>
            <li class="menu-title" role="menu-title">
             <span class="heading">
              SIP Resources
             </span>
            </li>
            <ul class="menu-accordion" role="menu-accordion">
             <li>
              <a href="/docs/api/rest/credential">
               Credentials
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/credential-list">
               Credential Lists
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/credential-list-mapping">
               Credential List Mappings
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/domain">
               Domains
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/ip-access-control-list">
               IP Access Control Lists
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/ip-access-control-list-mapping">
               IP Access Control List Mappings
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/ip-address">
               IP Address
              </a>
             </li>
            </ul>
            <li class="menu-title" role="menu-title">
             <span class="heading">
              Twilio Connect Resources
             </span>
            </li>
            <ul class="menu-accordion" role="menu-accordion">
             <li>
              <a href="/docs/api/rest/authorized-connect-apps">
               Authorized Connect Apps
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/connect-apps">
               Connect Apps
              </a>
             </li>
            </ul>
            <li class="menu-title expanded" role="menu-title">
             <span class="heading">
              Advanced Usage
             </span>
            </li>
            <ul class="menu-accordion expanded" role="menu-accordion">
             <li>
              <a href="/docs/api/rest/making-calls-sip">
               Make Calls with SIP
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/change-call-state">
               Change Call State
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/subaccounts">
               Group Usage with Subaccounts
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/test-credentials">
               Test Credentials
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/accepted-mime-types">
               Accepted MIME Types (MMS)
              </a>
             </li>
             <li class="active">
              <a href="/docs/api/rest/access-tokens">
               Access Tokens
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/connect-overview">
               Twilio Connect
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/tips">
               Tips &amp; Tricks
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/answering-machine-detection">
               Answering Machine Detection
              </a>
             </li>
            </ul>
            <li class="menu-title" role="menu-title">
             <span class="heading">
              Deprecated Resources
             </span>
            </li>
            <ul class="menu-accordion" role="menu-accordion">
             <li data-beta-feature="deprecated.notifications">
              <a href="/docs/api/rest/notification">
               Notifications
              </a>
             </li>
             <li>
              <a href="/docs/api/rest/sms">
               SMS
              </a>
             </li>
            </ul>
           </ul>
          </li>
         </ul>
         <div id="test-element">
         </div>
        </div>
       </div>
       <div class="nav-collapser">
        <div class="nav-collapser-fixed">
         <a class="collapse" data-collapser-action="collapse">
          <i aria-hidden="true" class="fa fa-chevron-left">
          </i>
         </a>
         <a class="expand hidden" data-collapser-action="expand">
          <i aria-hidden="true" class="fa fa-chevron-right">
          </i>
         </a>
        </div>
        <div class="nav-collapser-absolute hidden">
         <a class="collapse" data-collapser-action="collapse">
          <i aria-hidden="true" class="fa fa-chevron-left">
          </i>
         </a>
         <a class="expand hidden" data-collapser-action="expand">
          <i aria-hidden="true" class="fa fa-chevron-right">
          </i>
         </a>
        </div>
       </div>
      </div>
     </div>
     <div class="primary-column ">
      <div class="docs-prose">
       <h1 class="page-title ">
        Twilio API: Access Tokens
       </h1>
       <div class="block-markdown ">
        <div>
         <p>
          Access Tokens are short-lived tokens that you can use to authenticate 
Twilio Client SDKs like
          <a href="/docs/api/video">
           Video
          </a>
          and
          <a href="/docs/api/chat">
           Chat
          </a>
          . 
You create them on your server to verify a client's identity and grant access to 
client API features. All tokens have a limited lifetime, configurable up to 24 hours. 
However, a best practice is to generate Access Tokens for the shortest amount of 
time feasible for your application.
         </p>
         <p>
          <strong>
           Table of Contents
          </strong>
         </p>
         <ul>
          <li>
           <a href="#creating-tokens">
            Creating Tokens
           </a>
          </li>
          <li>
           <a href="#jwt-format">
            JWT Format
           </a>
          </li>
         </ul>
         <h2 id="creating-tokens">
          <a class="toclink" href="#creating-tokens">
           Creating Tokens
          </a>
         </h2>
         <p>
          Twilio Access Tokens are based on the
          <a href="http://jwt.io">
           JSON Web
Token
          </a>
          standard. You can read about the details of the JWT format for Access
Tokens
          <a href="#jwt-format">
           here
          </a>
          , but if you're using one of
          <a href="/docs/libraries">
           Twilio's
official helper libraries
          </a>
          you can use our
token-generation functionality without having to know how they're constructed.
         </p>
         <p>
          Let's see how we can create an access token in our application.
         </p>
         <h4 id="step-1-api-key">
          <a class="toclink" href="#step-1-api-key">
           Step 1: Create an API Key
          </a>
         </h4>
         <p>
          First, you need to create an
          <a href="/docs/api/rest/keys">
           API Key
          </a>
          , which
contains a secret used to sign Access Tokens. You can create API Keys from the
          <a href="/user/account/video/dev-tools/api-keys">
           Twilio
Console
          </a>
          or using the
          <a href="/docs/api/rest/keys">
           REST
API
          </a>
          . At the time you create the API Key, you'll be shown the Key's
secret.
          <strong>
           For security, you will only be shown the secret when the key
is created.
          </strong>
          You should store it with the Key's SID in a secure
location for the next step.
         </p>
         <h4 id="step-2-generate-token">
          <a class="toclink" href="#step-2-generate-token">
           Step 2: Generate an Access Token
          </a>
         </h4>
         <p>
          Next, you'll use the the secret of the API Key you created in
          <a href="#step-1-api-key">
           step
1
          </a>
          to generate an access-token using the Twilio
Helper Library.  Each token is granted access to specific client features. Here 
is an example of how to generate tokens that grant access to
          <a href="/docs/api/chat">
           Chat
          </a>
          :
         </p>
        </div>
       </div>
       <div class="block-code_sample ">
        <div class="md-code-sample" data-pref="server" data-title="Creating an Access Token (Voice)" id="code-creating-an-access-token-voice">
         <div class="inline-mode">
          <div class="code-rail code-rail-inline" id="coderail">
           <div class="rail-placeholder">
           </div>
           <div class="rail-header uk-hidden">
            <div class="rail-header-wrapper">
             <div class="rail-title">
              <div class="title-content inner">
               <span>
                Loading Code Samples...
               </span>
              </div>
             </div>
             <div class="rail-current-language">
              <div class="inner">
               <span>
                Language
               </span>
               <i class="fa fa-fw fa-chevron-down">
               </i>
              </div>
             </div>
            </div>
           </div>
           <div class="rail-toolbar uk-hidden">
            <div class="toolbar">
             <a class="uk-hidden tab" data-code="" href="#code">
              Code
             </a>
             <a class="uk-hidden inactive" data-output="" href="#output">
              Output
             </a>
             <span class="separator">
             </span>
             <a class="uk-hidden" id="download">
              <i class="fa fa-fw fa-download">
              </i>
              <span>
               Download Project
              </span>
             </a>
             <a class="uk-hidden" id="github" target="_blank">
              <i class="fa fa-fw fa-github-square">
              </i>
              <span>
               View on GitHub
              </span>
             </a>
             <a class="fr-on" href="#defrosty" id="defrosty">
              <i class="fa fa-fw fa-eye">
              </i>
              <span class="wider-tooltip">
               Toggle Highlighted Lines
              </span>
             </a>
             <a href="#copy" id="clippy">
              <i class="fa fa-fw fa-copy">
              </i>
              <span>
               Copy to Clipboard
              </span>
             </a>
             <a href="#linkcode" id="linkcode">
              <i class="fa fa-fw fa-link">
              </i>
              <span>
               Link to this Code
              </span>
             </a>
             <a data-expand="" href="#expand">
              <i class="fa fa-fw fa-arrows-alt">
              </i>
              <span>
               Full Screen
              </span>
             </a>
             <a class="uk-hidden" data-collapse="" href="#collapse">
              <i class="fa fa-fw fa-compress">
              </i>
              <span>
               Normal Size
              </span>
             </a>
            </div>
           </div>
           <div class="rail-samples">
            <ul>
             <li>
              <a href="#code-creating-an-access-token-voice">
               Creating an Access Token (Voice)
              </a>
             </li>
            </ul>
           </div>
           <div class="rail-languages">
           </div>
           <div class="rail-content">
            <div class="rail-content-inner">
             <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/voice-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-voice" data-sample-id="1715" data-sample-title="Creating an Access Token (Voice)">
              <div class="sample-language-data" style="display:none;">
               <select>
                <option value="cs">
                 C#
                </option>
                <option value="java">
                 Java
                </option>
                <option value="js">
                 Node.js
                </option>
                <option value="php">
                 PHP
                </option>
                <option value="py">
                 Python
                </option>
                <option value="rb">
                 Ruby
                </option>
               </select>
              </div>
              <div class="sample-version-tabs" data-ext="cs">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="4.x">
                  4.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="5.x">
                  5.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="js">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="2.x">
                  2.x
                 </li>
                 <li class="sample-version-tab" data-version="3.x">
                  3.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="py">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="5.x">
                  5.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="6.x">
                  6.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="rb">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="4.x">
                  4.x
                 </li>
                 <li class="sample-version-tab" data-version="5.x">
                  5.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="snippet-container">
               <pre class="codehilite" data-ext="js" data-filename="voice-example.3.x.js" data-version="3.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VoiceGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating Voice tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use Voice as a given user</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">outgoingApplicationSid</span><span class="o">:</span> <span class="nx">outgoingApplicationSid</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">voiceGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
               <pre class="codehilite" data-ext="js" data-filename="voice-example.2.x.js" data-version="2.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VoiceGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating Voice tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use Voice as a given user</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">outgoingApplicationSid</span><span class="o">:</span> <span class="nx">outgoingApplicationSid</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">voiceGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
               <pre class="codehilite" data-ext="java" data-filename="voice-example.7.x.java" data-version="default"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.VoiceGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for Voice</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">outgoingApplicationSid</span> <span class="o">=</span> <span class="s">"APxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create Voice grant</span>
</span><span class="code-line">    <span class="n">VoiceGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setOutgoingApplicationSid</span><span class="o">(</span><span class="n">outgoingApplicationSid</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="py" data-filename="voice-example.6.x.py" data-version="6.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">VoiceGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Voice grant</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Voice grant and add to token</span>
</span><span class="code-line"><span class="n">voice_grant</span> <span class="o">=</span> <span class="n">VoiceGrant</span><span class="p">(</span>
</span><span class="code-line">    <span class="n">outgoing_application_sid</span><span class="o">=</span><span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">voice_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
               <pre class="codehilite" data-ext="cs" data-filename="voice-example.5.x.cs" data-version="5.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to Voice</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">outgoingApplicationSid</span> <span class="p">=</span> <span class="s">"APXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create a Voice grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">OutgoingApplicationSid</span> <span class="p">=</span> <span class="n">outgoingApplicationSid</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span>
</span><span class="code-line">        <span class="p">{</span>
</span><span class="code-line">            <span class="p">{</span> <span class="n">grant</span> <span class="p">}</span>
</span><span class="code-line">        <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="php" data-filename="voice-example.5.x.php" data-version="default"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for Voice grant</span>
</span><span class="code-line"><span class="nv">$outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s2">"john_doe"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Voice grant</span>
</span><span class="code-line"><span class="nv">$voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$voiceGrant</span><span class="o">-&gt;</span><span class="na">setOutgoingApplicationSid</span><span class="p">(</span><span class="nv">$outgoingApplicationSid</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$voiceGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
               <pre class="codehilite" data-ext="py" data-filename="voice-example.5.x.py" data-version="5.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span><span class="p">,</span> <span class="n">VoiceGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Voice grant</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Voice grant and add to token</span>
</span><span class="code-line"><span class="n">voice_grant</span> <span class="o">=</span> <span class="n">VoiceGrant</span><span class="p">(</span>
</span><span class="code-line">    <span class="n">outgoing_application_sid</span><span class="o">=</span><span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">voice_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
               <pre class="codehilite" data-ext="rb" data-filename="voice-example.5.x.rb" data-version="5.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Voice</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Voice grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VoiceGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
               <pre class="codehilite" data-ext="cs" data-filename="voice-example.4.x.cs" data-version="4.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Auth</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">  <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// These are specific to Voice</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">outgoingApplicationSid</span> <span class="p">=</span> <span class="s">"APxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">twilioAccountSid</span><span class="p">,</span> <span class="n">twilioApiKey</span><span class="p">,</span> <span class="n">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">Identity</span> <span class="p">=</span> <span class="n">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create a Voice grant for this token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">OutgoingApplicationSid</span> <span class="p">=</span> <span class="n">outgoingApplicationSid</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">AddGrant</span><span class="p">(</span><span class="n">grant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJWT</span><span class="p">());</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="rb" data-filename="voice-example.4.x.rb" data-version="4.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Voice</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Voice grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VoiceGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
              </div>
              <div class="output-snippet-container">
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="button-mode">
          <h5 class="title">
           <i class="fa fa-fw fa-code">
           </i>
           Creating an Access Token (Voice)
          </h5>
          <div class="active-tail">
          </div>
         </div>
        </div>
       </div>
       <div class="block-code_sample ">
        <div class="md-code-sample" data-pref="server" data-title="Creating an Access Token (Chat)" id="code-creating-an-access-token-chat">
         <div class="inline-mode">
          <div class="code-rail code-rail-inline" id="coderail">
           <div class="rail-placeholder">
           </div>
           <div class="rail-header uk-hidden">
            <div class="rail-header-wrapper">
             <div class="rail-title">
              <div class="title-content inner">
               <span>
                Loading Code Samples...
               </span>
              </div>
             </div>
             <div class="rail-current-language">
              <div class="inner">
               <span>
                Language
               </span>
               <i class="fa fa-fw fa-chevron-down">
               </i>
              </div>
             </div>
            </div>
           </div>
           <div class="rail-toolbar uk-hidden">
            <div class="toolbar">
             <a class="uk-hidden tab" data-code="" href="#code">
              Code
             </a>
             <a class="uk-hidden inactive" data-output="" href="#output">
              Output
             </a>
             <span class="separator">
             </span>
             <a class="uk-hidden" id="download">
              <i class="fa fa-fw fa-download">
              </i>
              <span>
               Download Project
              </span>
             </a>
             <a class="uk-hidden" id="github" target="_blank">
              <i class="fa fa-fw fa-github-square">
              </i>
              <span>
               View on GitHub
              </span>
             </a>
             <a class="fr-on" href="#defrosty" id="defrosty">
              <i class="fa fa-fw fa-eye">
              </i>
              <span class="wider-tooltip">
               Toggle Highlighted Lines
              </span>
             </a>
             <a href="#copy" id="clippy">
              <i class="fa fa-fw fa-copy">
              </i>
              <span>
               Copy to Clipboard
              </span>
             </a>
             <a href="#linkcode" id="linkcode">
              <i class="fa fa-fw fa-link">
              </i>
              <span>
               Link to this Code
              </span>
             </a>
             <a data-expand="" href="#expand">
              <i class="fa fa-fw fa-arrows-alt">
              </i>
              <span>
               Full Screen
              </span>
             </a>
             <a class="uk-hidden" data-collapse="" href="#collapse">
              <i class="fa fa-fw fa-compress">
              </i>
              <span>
               Normal Size
              </span>
             </a>
            </div>
           </div>
           <div class="rail-samples">
            <ul>
             <li>
              <a href="#code-creating-an-access-token-chat">
               Creating an Access Token (Chat)
              </a>
             </li>
            </ul>
           </div>
           <div class="rail-languages">
           </div>
           <div class="rail-content">
            <div class="rail-content-inner">
             <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/ip-messaging-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-chat" data-sample-id="384" data-sample-title="Creating an Access Token (Chat)">
              <div class="sample-language-data" style="display:none;">
               <select>
                <option value="cs">
                 C#
                </option>
                <option value="java">
                 Java
                </option>
                <option value="js">
                 Node.js
                </option>
                <option value="php">
                 PHP
                </option>
                <option value="py">
                 Python
                </option>
                <option value="rb">
                 Ruby
                </option>
               </select>
              </div>
              <div class="sample-version-tabs" data-ext="cs">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="4.x">
                  4.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="5.x">
                  5.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="java">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="6.x">
                  6.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="7.x">
                  7.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="js">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="2.x">
                  2.x
                 </li>
                 <li class="sample-version-tab" data-version="3.x">
                  3.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="php">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="4.x">
                  4.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="5.x">
                  5.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="py">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="5.x">
                  5.x
                 </li>
                 <li class="sample-version-tab" data-default-version="" data-version="6.x">
                  6.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="sample-version-tabs" data-ext="rb">
               <div class="sample-version-tabs-inner">
                <span>
                 SDK Version:
                </span>
                <ul>
                 <li class="sample-version-tab" data-version="4.x">
                  4.x
                 </li>
                 <li class="sample-version-tab" data-version="5.x">
                  5.x
                 </li>
                </ul>
               </div>
              </div>
              <div class="snippet-container">
               <pre class="codehilite" data-ext="js" data-filename="ip-messaging-example.3.x.js" data-version="3.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">IpMessagingGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating IP Messaging tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">serviceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">deviceId</span> <span class="o">=</span> <span class="s1">'someiosdeviceid'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">endpointId</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">appName</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">identity</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">deviceId</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use IPM as a given user,</span>
</span><span class="code-line"><span class="c1">// on a given device</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">({</span>
</span><span class="code-line">  <span class="nx">serviceSid</span><span class="o">:</span> <span class="nx">serviceSid</span><span class="p">,</span>
</span><span class="code-line">  <span class="nx">endpointId</span><span class="o">:</span> <span class="nx">endpointId</span><span class="p">,</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
               <pre class="codehilite" data-ext="js" data-filename="ip-messaging-example.2.x.js" data-version="2.x"><code><span class="code-line"><span class="kd">var</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">IpMessagingGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating IP Messaging tokens</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">serviceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">deviceId</span> <span class="o">=</span> <span class="s1">'someiosdeviceid'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">endpointId</span> <span class="o">=</span> <span class="nx">appName</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">identity</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use IPM as a given user,</span>
</span><span class="code-line"><span class="c1">// on a given device</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">serviceSid</span><span class="o">:</span> <span class="nx">serviceSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">endpointId</span><span class="o">:</span> <span class="nx">endpointId</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">ipmGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
               <pre class="codehilite" data-ext="java" data-filename="ip-messaging-example.7.x.java" data-version="7.x"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.IpMessagingGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Example</span> <span class="o">{</span>
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">String</span> <span class="n">ipmServiceSid</span> <span class="o">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">deviceId</span> <span class="o">=</span> <span class="s">"someiosdevice"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user@example.com"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">appName</span> <span class="o">=</span> <span class="s">"HipFlowSlackDockRC"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">endpointId</span> <span class="o">=</span> <span class="n">appName</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">identity</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">deviceId</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">IpMessagingGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setEndpointId</span><span class="o">(</span><span class="n">endpointId</span><span class="o">);</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setServiceSid</span><span class="o">(</span><span class="n">ipmServiceSid</span><span class="o">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">twilioAccountSid</span><span class="o">,</span> <span class="n">twilioApiKey</span><span class="o">,</span> <span class="n">twilioApiSecret</span><span class="o">)</span>
</span><span class="code-line">        <span class="o">.</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="java" data-filename="ip-messaging-example.6.x.java" data-version="6.x"><code><span class="code-line"><span class="kn">package</span> <span class="nn">com.twilio</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.sdk.auth.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.sdk.auth.IpMessagingGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for IP Messaging</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">ipmServiceSid</span> <span class="o">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">deviceId</span> <span class="o">=</span> <span class="s">"someiosdevice"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user@example.com"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">appName</span> <span class="o">=</span> <span class="s">"HipFlowSlackDockRC"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">endpointId</span> <span class="o">=</span> <span class="n">appName</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">identity</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">deviceId</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create IP messaging grant</span>
</span><span class="code-line">    <span class="n">IpMessagingGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setEndpointId</span><span class="o">(</span><span class="n">endpointId</span><span class="o">);</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setServiceSid</span><span class="o">(</span><span class="n">ipmServiceSid</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJWT</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="py" data-filename="ip-messaging-example.6.x.py" data-version="6.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">IpMessagingGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for IP messaging grants</span>
</span><span class="code-line"><span class="n">ipm_service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:{0}:{1}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="n">device_id</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an IP Messaging grant and add to token</span>
</span><span class="code-line"><span class="n">ipm_grant</span> <span class="o">=</span> <span class="n">IpMessagingGrant</span><span class="p">(</span>
</span><span class="code-line">        <span class="n">endpoint_id</span><span class="o">=</span><span class="n">endpoint_id</span><span class="p">,</span>
</span><span class="code-line">        <span class="n">service_sid</span><span class="o">=</span><span class="n">ipm_service_sid</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">ipm_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
               <pre class="codehilite" data-ext="cs" data-filename="ip-messaging-example.5.x.cs" data-version="5.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to IP Messaging</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">ipmServiceSid</span> <span class="p">=</span> <span class="s">"ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user@example.com"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">deviceId</span> <span class="p">=</span> <span class="s">"someiosdevice"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an IP messaging grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">EndpointId</span> <span class="p">=</span> <span class="err">$</span><span class="s">"HipFlowSlackDockRC:{identity}:{deviceId}"</span><span class="p">;</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">ServiceSid</span> <span class="p">=</span> <span class="n">ipmServiceSid</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span>
</span><span class="code-line">        <span class="p">{</span>
</span><span class="code-line">            <span class="p">{</span> <span class="n">grant</span> <span class="p">}</span>
</span><span class="code-line">        <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="php" data-filename="ip-messaging-example.5.x.php" data-version="5.x"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for IP messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmServiceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$appName</span> <span class="o">=</span> <span class="s1">'TwilioChatDemo'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// choose a random username for the connecting user</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s2">"john_doe"</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// A device ID should be passed as a query string parameter to this script</span>
</span><span class="code-line"><span class="nv">$deviceId</span> <span class="o">=</span> <span class="s1">'somedevice'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$endpointId</span> <span class="o">=</span> <span class="nv">$appName</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$identity</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create IP Messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setServiceSid</span><span class="p">(</span><span class="nv">$ipmServiceSid</span><span class="p">);</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setEndpointId</span><span class="p">(</span><span class="nv">$endpointId</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
               <pre class="codehilite" data-ext="py" data-filename="ip-messaging-example.5.x.py" data-version="5.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span><span class="p">,</span> <span class="n">IpMessagingGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for IP messaging grants</span>
</span><span class="code-line"><span class="n">ipm_service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:{0}:{1}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="n">device_id</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an IP Messaging grant and add to token</span>
</span><span class="code-line"><span class="n">ipm_grant</span> <span class="o">=</span> <span class="n">IpMessagingGrant</span><span class="p">(</span><span class="n">endpoint_id</span><span class="o">=</span><span class="n">endpoint_id</span><span class="p">,</span> <span class="n">service_sid</span><span class="o">=</span><span class="n">ipm_service_sid</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">ipm_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
               <pre class="codehilite" data-ext="rb" data-filename="ip-messaging-example.5.x.rb" data-version="5.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for IP Messaging</span>
</span><span class="code-line"><span class="n">service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:</span><span class="si">#{</span><span class="n">identity</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span>
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create IP Messaging grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">IpMessagingGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">service_sid</span> <span class="o">=</span> <span class="n">service_sid</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">endpoint_id</span> <span class="o">=</span> <span class="n">endpoint_id</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
               <pre class="codehilite" data-ext="cs" data-filename="ip-messaging-example.4.x.cs" data-version="4.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Auth</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">	<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">	<span class="p">{</span>
</span><span class="code-line">    <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// These are specific to IP Messaging</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">ipmServiceSid</span> <span class="p">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user@example.com"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">deviceId</span> <span class="p">=</span> <span class="s">"someiosdevice"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">twilioAccountSid</span><span class="p">,</span> <span class="n">twilioApiKey</span><span class="p">,</span> <span class="n">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">Identity</span> <span class="p">=</span> <span class="n">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an IP messaging grant for this token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">EndpointId</span> <span class="p">=</span> <span class="err">$</span><span class="s">"HipFlowSlackDockRC:{identity}:{deviceId}"</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">ServiceSid</span> <span class="p">=</span> <span class="n">ipmServiceSid</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">AddGrant</span><span class="p">(</span><span class="n">grant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJWT</span><span class="p">());</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="php" data-filename="ip-messaging-example.4.x.php" data-version="4.x"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="k">require_once</span><span class="p">(</span><span class="s1">'./twilio-php/Services/Twilio.php'</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for IP messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmServiceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$deviceId</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$endpointId</span> <span class="o">=</span> <span class="nv">$appName</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$identity</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Services_Twilio_AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span> 
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create IP Messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Services_Twilio_Auth_IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setServiceSid</span><span class="p">(</span><span class="nv">$ipmServiceSid</span><span class="p">);</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setEndpointId</span><span class="p">(</span><span class="nv">$endpointId</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
               <pre class="codehilite" data-ext="rb" data-filename="ip-messaging-example.4.x.rb" data-version="4.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for IP Messaging</span>
</span><span class="code-line"><span class="n">service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:</span><span class="si">#{</span><span class="n">identity</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span> <span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span> <span class="n">identity</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create IP Messaging grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">IpMessagingGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">service_sid</span> <span class="o">=</span> <span class="n">service_sid</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">endpoint_id</span> <span class="o">=</span> <span class="n">endpoint_id</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span> <span class="n">grant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
              </div>
              <div class="output-snippet-container">
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="button-mode">
          <h5 class="title">
           <i class="fa fa-fw fa-code">
           </i>
           Creating an Access Token (Chat)
          </h5>
          <div class="active-tail">
          </div>
         </div>
        </div>
       </div>
       <div class="block-code_sample ">
        <div class="md-code-sample" data-pref="server" data-title="Creating an Access Token (Video)" id="code-creating-an-access-token-video">
         <div class="inline-mode">
          <div class="code-rail code-rail-inline" id="coderail">
           <div class="rail-placeholder">
           </div>
           <div class="rail-header uk-hidden">
            <div class="rail-header-wrapper">
             <div class="rail-title">
              <div class="title-content inner">
               <span>
                Loading Code Samples...
               </span>
              </div>
             </div>
             <div class="rail-current-language">
              <div class="inner">
               <span>
                Language
               </span>
               <i class="fa fa-fw fa-chevron-down">
               </i>
              </div>
             </div>
            </div>
           </div>
           <div class="rail-toolbar uk-hidden">
            <div class="toolbar">
             <a class="uk-hidden tab" data-code="" href="#code">
              Code
             </a>
             <a class="uk-hidden inactive" data-output="" href="#output">
              Output
             </a>
             <span class="separator">
             </span>
             <a class="uk-hidden" id="download">
              <i class="fa fa-fw fa-download">
              </i>
              <span>
               Download Project
              </span>
             </a>
             <a class="uk-hidden" id="github" target="_blank">
              <i class="fa fa-fw fa-github-square">
              </i>
              <span>
               View on GitHub
              </span>
             </a>
             <a class="fr-on" href="#defrosty" id="defrosty">
              <i class="fa fa-fw fa-eye">
              </i>
              <span class="wider-tooltip">
               Toggle Highlighted Lines
              </span>
             </a>
             <a href="#copy" id="clippy">
              <i class="fa fa-fw fa-copy">
              </i>
              <span>
               Copy to Clipboard
              </span>
             </a>
             <a href="#linkcode" id="linkcode">
              <i class="fa fa-fw fa-link">
              </i>
              <span>
               Link to this Code
              </span>
             </a>
             <a data-expand="" href="#expand">
              <i class="fa fa-fw fa-arrows-alt">
              </i>
              <span>
               Full Screen
              </span>
             </a>
             <a class="uk-hidden" data-collapse="" href="#collapse">
              <i class="fa fa-fw fa-compress">
              </i>
              <span>
               Normal Size
              </span>
             </a>
            </div>
           </div>
           <div class="rail-samples">
            <ul>
             <li>
              <a href="#code-creating-an-access-token-video">
               Creating an Access Token (Video)
              </a>
             </li>
            </ul>
           </div>
           <div class="rail-languages">
           </div>
           <div class="rail-content">
            <div class="rail-content-inner">
             <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/video-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-video" data-sample-id="941" data-sample-title="Creating an Access Token (Video)">
              <div class="sample-language-data" style="display:none;">
               <select>
                <option value="cs">
                 C#
                </option>
                <option value="java">
                 Java
                </option>
                <option value="js">
                 Node.js
                </option>
                <option value="php">
                 PHP
                </option>
                <option value="py">
                 Python
                </option>
                <option value="rb">
                 Ruby
                </option>
               </select>
              </div>
              <div class="snippet-container">
               <pre class="codehilite" data-ext="java" data-filename="video-example.7.x.java" data-version="default"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.VideoGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for Video</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create Video grant</span>
</span><span class="code-line">    <span class="n">VideoGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VideoGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setRoom</span><span class="o">(</span><span class="s">"cool room"</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="js" data-filename="video-example.3.x.js" data-version="default"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VideoGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VideoGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Video Grant</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">videoGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VideoGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">room</span><span class="o">:</span> <span class="s1">'cool room'</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">videoGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
               <pre class="codehilite" data-ext="cs" data-filename="video-example.5.x.cs" data-version="default"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to Video</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create a Video grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VideoGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">Room</span> <span class="p">=</span> <span class="s">"cool room"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">grant</span> <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
               <pre class="codehilite" data-ext="php" data-filename="video-example.5.x.php" data-version="default"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\VideoGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for Video grant</span>
</span><span class="code-line"><span class="nv">$roomName</span> <span class="o">=</span> <span class="s1">'cool room'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s1">'john_doe'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Video grant</span>
</span><span class="code-line"><span class="nv">$videoGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VideoGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$videoGrant</span><span class="o">-&gt;</span><span class="na">setRoom</span><span class="p">(</span><span class="nv">$roomName</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$videoGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
               <pre class="codehilite" data-ext="rb" data-filename="video-example.5.x.rb" data-version="default"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Video</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Video grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VideoGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">room</span> <span class="o">=</span> <span class="s1">'cool room'</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
               <pre class="codehilite" data-ext="py" data-filename="video-example.6.x.py" data-version="default"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">VideoGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for all Twilio Access Tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Video grant</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Access Token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Video grant and add to token</span>
</span><span class="code-line"><span class="n">video_grant</span> <span class="o">=</span> <span class="n">VideoGrant</span><span class="p">(</span><span class="n">room</span><span class="o">=</span><span class="s1">'cool room'</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">video_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
              </div>
              <div class="output-snippet-container">
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="button-mode">
          <h5 class="title">
           <i class="fa fa-fw fa-code">
           </i>
           Creating an Access Token (Video)
          </h5>
          <div class="active-tail">
          </div>
         </div>
        </div>
       </div>
       <div class="block-markdown ">
        <div>
         <h4 id="step-3-authenticate">
          <a class="toclink" href="#step-3-authenticate">
           Step 3: Authenticate
          </a>
         </h4>
         <p>
          Now you're ready to use your token. For client-side SDKs like
          <a href="/docs/api/chat">
           Chat
          </a>
          and
          <a href="/docs/api/video">
           video
          </a>
          , you will need to get the stringified token to your
client-side code via Ajax or some other means. Refer to the "Identity and Access Tokens"
guides in the product documentation for
          <a href="/docs/api/video/identity">
           video
          </a>
          or
          <a href="/docs/api/chat/guides/identity">
           Chat
          </a>
          for more details.
         </p>
         <h4 id="managing-the-lifecycle-of-access-tokens-using-api-keys">
          <a class="toclink" href="#managing-the-lifecycle-of-access-tokens-using-api-keys">
           Managing the Lifecycle of Access Tokens using API Keys
          </a>
         </h4>
         <p>
          Your application will use
          <a href="/docs/api/rest/keys">
           API Keys
          </a>
          to manage
the lifecycle of Access Tokens using a few basic steps:
         </p>
         <ul>
          <li>
           <a href="/docs/api/rest/keys#list-post">
            Create an API Key
           </a>
           using the REST API and store the secret returned. You can also manage API keys in the console for your product.
          </li>
          <li>
           Use the Twilio Helper Libraries and the API Key's
           <code>
            Secret
           </code>
           to generate Access Tokens for clients.
          </li>
          <li>
           <a href="/docs/api/rest/keys#instance-delete">
            Delete the API Key
           </a>
           to revoke all of the Access Tokens generated using it.
          </li>
         </ul>
         <h2 id="jwt-format">
          <a class="toclink" href="#jwt-format">
           JWT Format
          </a>
         </h2>
         <p>
          Each Access Token is a
          <a href="http://www.jwt.io">
           JWT
          </a>
          , which is an encoded JSON object 
with three parts: the header, the payload, and the signature. The following is a
JWT token generated for Chat using code similar to the example above:
         </p>
         <blockquote>
          <p>
           eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImN0eSI6InR3aWxpby1mcGE7dj0xIn0.eyJqdGkiOiJTS3h4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4LTE0NTA0NzExNDciLCJpc3MiOiJTS3h4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4Iiwic3ViIjoiQUN4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eCIsIm5iZiI6MTQ1MDQ3MTE0NywiZXhwIjoxNDUwNDc0NzQ3LCJncmFudHMiOnsiaWRlbnRpdHkiOiJ1c2VyQGV4YW1wbGUuY29tIiwiaXBfbWVzc2FnaW5nIjp7InNlcnZpY2Vfc2lkIjoiSVN4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eCIsImVuZHBvaW50X2lkIjoiSGlwRmxvd1NsYWNrRG9ja1JDOnVzZXJAZXhhbXBsZS5jb206c29tZWlvc2RldmljZSJ9fX0.IHx8KeH1acIfwnd8EIin3QBGPbfnF-yVnSFp5NpQJi0
          </p>
         </blockquote>
         <p>
          If we inspect it
          <a href="http://www.jwt.io">
           with the debugger at jwt.io
          </a>
          , we can further explore its content.
         </p>
         <h4 id="jwt-header">
          <a class="toclink" href="#jwt-header">
           Header
          </a>
         </h4>
         <div class="codehilite">
          <pre><span class="code-line"><span class="p">{</span>
</span><span class="code-line">  <span class="nt">"typ"</span><span class="p">:</span> <span class="s2">"JWT"</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"alg"</span><span class="p">:</span> <span class="s2">"HS256"</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"cty"</span><span class="p">:</span> <span class="s2">"twilio-fpa;v=1"</span>
</span><span class="code-line"><span class="p">}</span>
</span></pre>
         </div>
         <p>
          The
          <code>
           header
          </code>
          section encodes the format of the token:
         </p>
         <ul>
          <li>
           <code>
            alg
           </code>
           is the algorithm used to encode the token.  It MUST be “HS256”.
          </li>
          <li>
           <code>
            typ
           </code>
           is the type of token.  It MUST be "JWT".
          </li>
          <li>
           <code>
            cty
           </code>
           is the content-type and encodes the version of the Access Token.  It MUST be "twilio-fpa;v=1".
          </li>
         </ul>
         <h4 id="payload">
          <a class="toclink" href="#payload">
           Payload
          </a>
         </h4>
         <div class="codehilite">
          <pre><span class="code-line"><span class="p">{</span>
</span><span class="code-line">  <span class="nt">"jti"</span><span class="p">:</span> <span class="s2">"SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-1450471147"</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"iss"</span><span class="p">:</span> <span class="s2">"SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"sub"</span><span class="p">:</span> <span class="s2">"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"nbf"</span><span class="p">:</span> <span class="mi">1450471147</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"exp"</span><span class="p">:</span> <span class="mi">1450474747</span><span class="p">,</span>
</span><span class="code-line">  <span class="nt">"grants"</span><span class="p">:</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nt">"identity"</span><span class="p">:</span> <span class="s2">"user@example.com"</span><span class="p">,</span>
</span><span class="code-line">    <span class="nt">"ip_messaging"</span><span class="p">:</span> <span class="p">{</span>
</span><span class="code-line">      <span class="nt">"service_sid"</span><span class="p">:</span> <span class="s2">"ISxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></pre>
         </div>
         <p>
          The
          <code>
           payload
          </code>
          section describes the authorization granted:
         </p>
         <ul>
          <li>
           <code>
            jti
           </code>
           is a unique identifier for the token.  Your application can choose this identifier.  The default helper library implementation includes the Sid of the API Key used to generate the token, and a unique random string.
          </li>
          <li>
           <code>
            iss
           </code>
           is the issuer - the API Key whose secret signs the token.
          </li>
          <li>
           <code>
            sub
           </code>
           is the Sid of the account to which access is scoped.
          </li>
          <li>
           <code>
            nbf
           </code>
           is the timestamp on which the token was generated.
          </li>
          <li>
           <code>
            exp
           </code>
           is the timestamp on which the token will expire.  Tokens have a maximum age of 24 hours.
          </li>
          <li>
           <code>
            grants
           </code>
           is the list of granted permissions the token has. Client SDK (Chat, Video) grant values will vary from SDK to SDK.
          </li>
         </ul>
         <h3 id="signature">
          <a class="toclink" href="#signature">
           Signature
          </a>
         </h3>
         <p>
          The
          <code>
           signature
          </code>
          section is a signed hash that serves to prove the authenticity 
of the token. It is the result of hashing the JWT header and payload together 
with your API secret, which should only be known to your application and 
Twilio.
         </p>
        </div>
       </div>
       <div class="help-box">
        <h4>
         <i class="fa fa-fw fa-life-ring">
         </i>
         Need some help?
        </h4>
        <p>
         We all do sometimes; code is hard. Get help now from our
         <a href="https://support.twilio.com">
          support team
         </a>
         , or lean on
    the wisdom of the crowd browsing the
         <a href="http://stackoverflow.com/questions/tagged/twilio">
          Twilio tag
         </a>
         on Stack Overflow.
        </p>
       </div>
      </div>
     </div>
     <div class="code-column">
      <div class="code-rail code-rail-column" data-uk-sticky="{boundary: true}" id="coderail">
       <div class="rail-placeholder">
       </div>
       <div class="rail-header uk-hidden">
        <div class="rail-header-wrapper">
         <div class="rail-navigation">
          <div class="inner">
           <a class="inactive" data-previous="" href="#previous">
            <i class="fa fa-fw fa-arrow-left left">
            </i>
           </a>
          </div>
          <div class="inner">
           <span>
            <span class="current-index">
             1
            </span>
            <span>
             /
            </span>
            <span class="snippet-total">
             1
            </span>
           </span>
          </div>
          <div class="inner">
           <a data-next="" href="#next">
            <i class="fa fa-fw fa-arrow-right">
            </i>
           </a>
          </div>
         </div>
         <div class="rail-title">
          <div class="title-content inner">
           <span>
            Loading Code Samples...
           </span>
           <i class="fa fa-fw fa-chevron-down">
           </i>
          </div>
         </div>
        </div>
       </div>
       <div class="rail-toolbar uk-hidden">
        <div class="rail-current-language">
         <div class="inner">
          <span>
           Language
          </span>
          <i class="fa fa-fw fa-chevron-down">
          </i>
         </div>
        </div>
        <div class="toolbar">
         <a class="uk-hidden tab" data-code="" href="#code">
          Code
         </a>
         <a class="uk-hidden inactive" data-output="" href="#output">
          Output
         </a>
         <span class="separator">
         </span>
         <a class="uk-hidden" id="download">
          <i class="fa fa-fw fa-download">
          </i>
          <span>
           Download Project
          </span>
         </a>
         <a class="uk-hidden" id="github" target="_blank">
          <i class="fa fa-fw fa-github-square">
          </i>
          <span>
           View on GitHub
          </span>
         </a>
         <a class="fr-on" href="#defrosty" id="defrosty">
          <i class="fa fa-fw fa-eye">
          </i>
          <span class="wider-tooltip">
           Toggle Highlighted Lines
          </span>
         </a>
         <a href="#copy" id="clippy">
          <i class="fa fa-fw fa-copy">
          </i>
          <span>
           Copy to Clipboard
          </span>
         </a>
         <a href="#linkcode" id="linkcode">
          <i class="fa fa-fw fa-link">
          </i>
          <span>
           Link to this Code
          </span>
         </a>
         <a data-expand="" href="#expand">
          <i class="fa fa-fw fa-arrows-alt">
          </i>
          <span>
           Full Screen
          </span>
         </a>
         <a class="uk-hidden" data-collapse="" href="#collapse">
          <i class="fa fa-fw fa-compress">
          </i>
          <span>
           Normal Size
          </span>
         </a>
        </div>
       </div>
       <div class="rail-samples">
        <ul>
         <li>
          <a href="#code-creating-an-access-token-voice">
           Creating an Access Token (Voice)
          </a>
         </li>
         <li>
          <a href="#code-creating-an-access-token-chat">
           Creating an Access Token (Chat)
          </a>
         </li>
         <li>
          <a href="#code-creating-an-access-token-video">
           Creating an Access Token (Video)
          </a>
         </li>
        </ul>
       </div>
       <div class="rail-languages">
       </div>
       <div class="rail-content">
        <div class="rail-content-inner">
         <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/voice-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-voice" data-sample-id="1715" data-sample-title="Creating an Access Token (Voice)">
          <div class="sample-language-data" style="display:none;">
           <select>
            <option value="cs">
             C#
            </option>
            <option value="java">
             Java
            </option>
            <option value="js">
             Node.js
            </option>
            <option value="php">
             PHP
            </option>
            <option value="py">
             Python
            </option>
            <option value="rb">
             Ruby
            </option>
           </select>
          </div>
          <div class="sample-version-tabs" data-ext="cs">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="4.x">
              4.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="5.x">
              5.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="js">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="2.x">
              2.x
             </li>
             <li class="sample-version-tab" data-version="3.x">
              3.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="py">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="5.x">
              5.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="6.x">
              6.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="rb">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="4.x">
              4.x
             </li>
             <li class="sample-version-tab" data-version="5.x">
              5.x
             </li>
            </ul>
           </div>
          </div>
          <div class="snippet-container">
           <pre class="codehilite" data-ext="js" data-filename="voice-example.3.x.js" data-version="3.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VoiceGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating Voice tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use Voice as a given user</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">outgoingApplicationSid</span><span class="o">:</span> <span class="nx">outgoingApplicationSid</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">voiceGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
           <pre class="codehilite" data-ext="js" data-filename="voice-example.2.x.js" data-version="2.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VoiceGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating Voice tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use Voice as a given user</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">outgoingApplicationSid</span><span class="o">:</span> <span class="nx">outgoingApplicationSid</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">voiceGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
           <pre class="codehilite" data-ext="java" data-filename="voice-example.7.x.java" data-version="default"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.VoiceGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for Voice</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">outgoingApplicationSid</span> <span class="o">=</span> <span class="s">"APxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create Voice grant</span>
</span><span class="code-line">    <span class="n">VoiceGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setOutgoingApplicationSid</span><span class="o">(</span><span class="n">outgoingApplicationSid</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="py" data-filename="voice-example.6.x.py" data-version="6.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">VoiceGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Voice grant</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Voice grant and add to token</span>
</span><span class="code-line"><span class="n">voice_grant</span> <span class="o">=</span> <span class="n">VoiceGrant</span><span class="p">(</span>
</span><span class="code-line">    <span class="n">outgoing_application_sid</span><span class="o">=</span><span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">voice_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
           <pre class="codehilite" data-ext="cs" data-filename="voice-example.5.x.cs" data-version="5.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to Voice</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">outgoingApplicationSid</span> <span class="p">=</span> <span class="s">"APXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create a Voice grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">OutgoingApplicationSid</span> <span class="p">=</span> <span class="n">outgoingApplicationSid</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span>
</span><span class="code-line">        <span class="p">{</span>
</span><span class="code-line">            <span class="p">{</span> <span class="n">grant</span> <span class="p">}</span>
</span><span class="code-line">        <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="php" data-filename="voice-example.5.x.php" data-version="default"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\VoiceGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for Voice grant</span>
</span><span class="code-line"><span class="nv">$outgoingApplicationSid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s2">"john_doe"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Voice grant</span>
</span><span class="code-line"><span class="nv">$voiceGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$voiceGrant</span><span class="o">-&gt;</span><span class="na">setOutgoingApplicationSid</span><span class="p">(</span><span class="nv">$outgoingApplicationSid</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$voiceGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
           <pre class="codehilite" data-ext="py" data-filename="voice-example.5.x.py" data-version="5.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span><span class="p">,</span> <span class="n">VoiceGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Voice grant</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Voice grant and add to token</span>
</span><span class="code-line"><span class="n">voice_grant</span> <span class="o">=</span> <span class="n">VoiceGrant</span><span class="p">(</span>
</span><span class="code-line">    <span class="n">outgoing_application_sid</span><span class="o">=</span><span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">voice_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
           <pre class="codehilite" data-ext="rb" data-filename="voice-example.5.x.rb" data-version="5.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Voice</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Voice grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VoiceGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
           <pre class="codehilite" data-ext="cs" data-filename="voice-example.4.x.cs" data-version="4.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Auth</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">  <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// These are specific to Voice</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">outgoingApplicationSid</span> <span class="p">=</span> <span class="s">"APxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">twilioAccountSid</span><span class="p">,</span> <span class="n">twilioApiKey</span><span class="p">,</span> <span class="n">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">Identity</span> <span class="p">=</span> <span class="n">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create a Voice grant for this token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VoiceGrant</span><span class="p">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">OutgoingApplicationSid</span> <span class="p">=</span> <span class="n">outgoingApplicationSid</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">AddGrant</span><span class="p">(</span><span class="n">grant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJWT</span><span class="p">());</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="rb" data-filename="voice-example.4.x.rb" data-version="4.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Voice</span>
</span><span class="code-line"><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="s1">'APxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Voice grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VoiceGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">outgoing_application_sid</span> <span class="o">=</span> <span class="n">outgoing_application_sid</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
          </div>
          <div class="output-snippet-container">
          </div>
         </div>
         <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/ip-messaging-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-chat" data-sample-id="384" data-sample-title="Creating an Access Token (Chat)">
          <div class="sample-language-data" style="display:none;">
           <select>
            <option value="cs">
             C#
            </option>
            <option value="java">
             Java
            </option>
            <option value="js">
             Node.js
            </option>
            <option value="php">
             PHP
            </option>
            <option value="py">
             Python
            </option>
            <option value="rb">
             Ruby
            </option>
           </select>
          </div>
          <div class="sample-version-tabs" data-ext="cs">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="4.x">
              4.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="5.x">
              5.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="java">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="6.x">
              6.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="7.x">
              7.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="js">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="2.x">
              2.x
             </li>
             <li class="sample-version-tab" data-version="3.x">
              3.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="php">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="4.x">
              4.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="5.x">
              5.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="py">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="5.x">
              5.x
             </li>
             <li class="sample-version-tab" data-default-version="" data-version="6.x">
              6.x
             </li>
            </ul>
           </div>
          </div>
          <div class="sample-version-tabs" data-ext="rb">
           <div class="sample-version-tabs-inner">
            <span>
             SDK Version:
            </span>
            <ul>
             <li class="sample-version-tab" data-version="4.x">
              4.x
             </li>
             <li class="sample-version-tab" data-version="5.x">
              5.x
             </li>
            </ul>
           </div>
          </div>
          <div class="snippet-container">
           <pre class="codehilite" data-ext="js" data-filename="ip-messaging-example.3.x.js" data-version="3.x"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">IpMessagingGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating IP Messaging tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">serviceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">deviceId</span> <span class="o">=</span> <span class="s1">'someiosdeviceid'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">endpointId</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">appName</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">identity</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">deviceId</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use IPM as a given user,</span>
</span><span class="code-line"><span class="c1">// on a given device</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">({</span>
</span><span class="code-line">  <span class="nx">serviceSid</span><span class="o">:</span> <span class="nx">serviceSid</span><span class="p">,</span>
</span><span class="code-line">  <span class="nx">endpointId</span><span class="o">:</span> <span class="nx">endpointId</span><span class="p">,</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
           <pre class="codehilite" data-ext="js" data-filename="ip-messaging-example.2.x.js" data-version="2.x"><code><span class="code-line"><span class="kd">var</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">IpMessagingGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used specifically for creating IP Messaging tokens</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">serviceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">deviceId</span> <span class="o">=</span> <span class="s1">'someiosdeviceid'</span><span class="p">;</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">endpointId</span> <span class="o">=</span> <span class="nx">appName</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">identity</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a "grant" which enables a client to use IPM as a given user,</span>
</span><span class="code-line"><span class="c1">// on a given device</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">serviceSid</span><span class="o">:</span> <span class="nx">serviceSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">endpointId</span><span class="o">:</span> <span class="nx">endpointId</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">ipmGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
           <pre class="codehilite" data-ext="java" data-filename="ip-messaging-example.7.x.java" data-version="7.x"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.IpMessagingGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Example</span> <span class="o">{</span>
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">String</span> <span class="n">ipmServiceSid</span> <span class="o">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">deviceId</span> <span class="o">=</span> <span class="s">"someiosdevice"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user@example.com"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">appName</span> <span class="o">=</span> <span class="s">"HipFlowSlackDockRC"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">endpointId</span> <span class="o">=</span> <span class="n">appName</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">identity</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">deviceId</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">IpMessagingGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setEndpointId</span><span class="o">(</span><span class="n">endpointId</span><span class="o">);</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setServiceSid</span><span class="o">(</span><span class="n">ipmServiceSid</span><span class="o">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">twilioAccountSid</span><span class="o">,</span> <span class="n">twilioApiKey</span><span class="o">,</span> <span class="n">twilioApiSecret</span><span class="o">)</span>
</span><span class="code-line">        <span class="o">.</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="java" data-filename="ip-messaging-example.6.x.java" data-version="6.x"><code><span class="code-line"><span class="kn">package</span> <span class="nn">com.twilio</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.sdk.auth.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.sdk.auth.IpMessagingGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for IP Messaging</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">ipmServiceSid</span> <span class="o">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">deviceId</span> <span class="o">=</span> <span class="s">"someiosdevice"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user@example.com"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">appName</span> <span class="o">=</span> <span class="s">"HipFlowSlackDockRC"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">endpointId</span> <span class="o">=</span> <span class="n">appName</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">identity</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">deviceId</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create IP messaging grant</span>
</span><span class="code-line">    <span class="n">IpMessagingGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setEndpointId</span><span class="o">(</span><span class="n">endpointId</span><span class="o">);</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setServiceSid</span><span class="o">(</span><span class="n">ipmServiceSid</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJWT</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="py" data-filename="ip-messaging-example.6.x.py" data-version="6.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">IpMessagingGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for IP messaging grants</span>
</span><span class="code-line"><span class="n">ipm_service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:{0}:{1}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="n">device_id</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an IP Messaging grant and add to token</span>
</span><span class="code-line"><span class="n">ipm_grant</span> <span class="o">=</span> <span class="n">IpMessagingGrant</span><span class="p">(</span>
</span><span class="code-line">        <span class="n">endpoint_id</span><span class="o">=</span><span class="n">endpoint_id</span><span class="p">,</span>
</span><span class="code-line">        <span class="n">service_sid</span><span class="o">=</span><span class="n">ipm_service_sid</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">ipm_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
           <pre class="codehilite" data-ext="cs" data-filename="ip-messaging-example.5.x.cs" data-version="5.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to IP Messaging</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">ipmServiceSid</span> <span class="p">=</span> <span class="s">"ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user@example.com"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">deviceId</span> <span class="p">=</span> <span class="s">"someiosdevice"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an IP messaging grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">EndpointId</span> <span class="p">=</span> <span class="err">$</span><span class="s">"HipFlowSlackDockRC:{identity}:{deviceId}"</span><span class="p">;</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">ServiceSid</span> <span class="p">=</span> <span class="n">ipmServiceSid</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span>
</span><span class="code-line">        <span class="p">{</span>
</span><span class="code-line">            <span class="p">{</span> <span class="n">grant</span> <span class="p">}</span>
</span><span class="code-line">        <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="php" data-filename="ip-messaging-example.5.x.php" data-version="5.x"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\IpMessagingGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for IP messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmServiceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$appName</span> <span class="o">=</span> <span class="s1">'TwilioChatDemo'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// choose a random username for the connecting user</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s2">"john_doe"</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// A device ID should be passed as a query string parameter to this script</span>
</span><span class="code-line"><span class="nv">$deviceId</span> <span class="o">=</span> <span class="s1">'somedevice'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$endpointId</span> <span class="o">=</span> <span class="nv">$appName</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$identity</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create IP Messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setServiceSid</span><span class="p">(</span><span class="nv">$ipmServiceSid</span><span class="p">);</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setEndpointId</span><span class="p">(</span><span class="nv">$endpointId</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
           <pre class="codehilite" data-ext="py" data-filename="ip-messaging-example.5.x.py" data-version="5.x"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span><span class="p">,</span> <span class="n">IpMessagingGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for all twilio access tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for IP messaging grants</span>
</span><span class="code-line"><span class="n">ipm_service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:{0}:{1}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="n">device_id</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create access token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an IP Messaging grant and add to token</span>
</span><span class="code-line"><span class="n">ipm_grant</span> <span class="o">=</span> <span class="n">IpMessagingGrant</span><span class="p">(</span><span class="n">endpoint_id</span><span class="o">=</span><span class="n">endpoint_id</span><span class="p">,</span> <span class="n">service_sid</span><span class="o">=</span><span class="n">ipm_service_sid</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">ipm_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
           <pre class="codehilite" data-ext="rb" data-filename="ip-messaging-example.5.x.rb" data-version="5.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for IP Messaging</span>
</span><span class="code-line"><span class="n">service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:</span><span class="si">#{</span><span class="n">identity</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span>
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span>
</span><span class="code-line"><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create IP Messaging grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">IpMessagingGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">service_sid</span> <span class="o">=</span> <span class="n">service_sid</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">endpoint_id</span> <span class="o">=</span> <span class="n">endpoint_id</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
           <pre class="codehilite" data-ext="cs" data-filename="ip-messaging-example.4.x.cs" data-version="4.x"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Auth</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">	<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">	<span class="p">{</span>
</span><span class="code-line">    <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// These are specific to IP Messaging</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">ipmServiceSid</span> <span class="p">=</span> <span class="s">"ISxxxxxxxxxxxx"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user@example.com"</span><span class="p">;</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">deviceId</span> <span class="p">=</span> <span class="s">"someiosdevice"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">twilioAccountSid</span><span class="p">,</span> <span class="n">twilioApiKey</span><span class="p">,</span> <span class="n">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">Identity</span> <span class="p">=</span> <span class="n">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Create an IP messaging grant for this token</span>
</span><span class="code-line">    <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">EndpointId</span> <span class="p">=</span> <span class="err">$</span><span class="s">"HipFlowSlackDockRC:{identity}:{deviceId}"</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">grant</span><span class="p">.</span><span class="n">ServiceSid</span> <span class="p">=</span> <span class="n">ipmServiceSid</span><span class="p">;</span>
</span><span class="code-line">    <span class="n">token</span><span class="p">.</span><span class="n">AddGrant</span><span class="p">(</span><span class="n">grant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJWT</span><span class="p">());</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="php" data-filename="ip-messaging-example.4.x.php" data-version="4.x"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="k">require_once</span><span class="p">(</span><span class="s1">'./twilio-php/Services/Twilio.php'</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for IP messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmServiceSid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$appName</span> <span class="o">=</span> <span class="s1">'HipFlowSlackDockRC'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$deviceId</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$endpointId</span> <span class="o">=</span> <span class="nv">$appName</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$identity</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$deviceId</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Services_Twilio_AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span> 
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span> 
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create IP Messaging grant</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Services_Twilio_Auth_IpMessagingGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setServiceSid</span><span class="p">(</span><span class="nv">$ipmServiceSid</span><span class="p">);</span>
</span><span class="code-line"><span class="nv">$ipmGrant</span><span class="o">-&gt;</span><span class="na">setEndpointId</span><span class="p">(</span><span class="nv">$endpointId</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$ipmGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
           <pre class="codehilite" data-ext="rb" data-filename="ip-messaging-example.4.x.rb" data-version="4.x"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for IP Messaging</span>
</span><span class="code-line"><span class="n">service_sid</span> <span class="o">=</span> <span class="s1">'ISxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">device_id</span> <span class="o">=</span> <span class="s1">'someiosdevice'</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user@example.com'</span>
</span><span class="code-line"><span class="n">endpoint_id</span> <span class="o">=</span> <span class="s2">"HipFlowSlackDockRC:</span><span class="si">#{</span><span class="n">identity</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span> <span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span> <span class="n">identity</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create IP Messaging grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">IpMessagingGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">service_sid</span> <span class="o">=</span> <span class="n">service_sid</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">endpoint_id</span> <span class="o">=</span> <span class="n">endpoint_id</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span> <span class="n">grant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
          </div>
          <div class="output-snippet-container">
          </div>
         </div>
         <div class="code-sample" data-download-url="" data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/rest/access-tokens/video-example/{{ filename }}" data-pref="server" data-sample="code-creating-an-access-token-video" data-sample-id="941" data-sample-title="Creating an Access Token (Video)">
          <div class="sample-language-data" style="display:none;">
           <select>
            <option value="cs">
             C#
            </option>
            <option value="java">
             Java
            </option>
            <option value="js">
             Node.js
            </option>
            <option value="php">
             PHP
            </option>
            <option value="py">
             Python
            </option>
            <option value="rb">
             Ruby
            </option>
           </select>
          </div>
          <div class="snippet-container">
           <pre class="codehilite" data-ext="java" data-filename="video-example.7.x.java" data-version="default"><code><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.AccessToken</span><span class="o">;</span>
</span><span class="code-line"><span class="kn">import</span> <span class="nn">com.twilio.jwt.accesstoken.VideoGrant</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenGenerator</span> <span class="o">{</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="code-line">    <span class="c1">// Required for all types of tokens</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioAccountSid</span> <span class="o">=</span> <span class="s">"ACxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiKey</span> <span class="o">=</span> <span class="s">"SKxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">twilioApiSecret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxx"</span><span class="o">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// Required for Video</span>
</span><span class="code-line">    <span class="n">String</span> <span class="n">identity</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">;</span>
</span><span class="code-line">      
</span><span class="code-line">    <span class="c1">// Create Video grant</span>
</span><span class="code-line">    <span class="n">VideoGrant</span> <span class="n">grant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VideoGrant</span><span class="o">();</span>
</span><span class="code-line">    <span class="n">grant</span><span class="o">.</span><span class="na">setRoom</span><span class="o">(</span><span class="s">"cool room"</span><span class="o">);</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// Create access token</span>
</span><span class="code-line">    <span class="n">AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccessToken</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
</span><span class="code-line">      <span class="n">twilioAccountSid</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiKey</span><span class="o">,</span>
</span><span class="code-line">      <span class="n">twilioApiSecret</span>
</span><span class="code-line">    <span class="o">).</span><span class="na">identity</span><span class="o">(</span><span class="n">identity</span><span class="o">).</span><span class="na">grant</span><span class="o">(</span><span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">toJwt</span><span class="o">());</span>
</span><span class="code-line">  <span class="o">}</span>
</span><span class="code-line"><span class="o">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="js" data-filename="video-example.3.x.js" data-version="default"><code><span class="code-line"><span class="kr">const</span> <span class="nx">AccessToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twilio'</span><span class="p">).</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">VideoGrant</span> <span class="o">=</span> <span class="nx">AccessToken</span><span class="p">.</span><span class="nx">VideoGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Used when generating any kind of tokens</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Video Grant</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">videoGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VideoGrant</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">room</span><span class="o">:</span> <span class="s1">'cool room'</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an access token which we will sign and return to the client,</span>
</span><span class="code-line"><span class="c1">// containing the grant we just created</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span><span class="nx">twilioAccountSid</span><span class="p">,</span> <span class="nx">twilioApiKey</span><span class="p">,</span> <span class="nx">twilioApiSecret</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">addGrant</span><span class="p">(</span><span class="nx">videoGrant</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">token</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Serialize the token to a JWT string</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">toJwt</span><span class="p">());</span>
</span></code></pre>
           <pre class="codehilite" data-ext="cs" data-filename="video-example.5.x.cs" data-version="default"><code><span class="code-line"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class="code-line"><span class="k">using</span> <span class="nn">Twilio.Jwt.AccessToken</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="k">class</span> <span class="nc">Example</span>
</span><span class="code-line"><span class="p">{</span>
</span><span class="code-line">    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class="code-line">    <span class="p">{</span>
</span><span class="code-line">        <span class="c1">// These values are necessary for any access token</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioAccountSid</span> <span class="p">=</span> <span class="s">"ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiKey</span> <span class="p">=</span> <span class="s">"SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">;</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">twilioApiSecret</span> <span class="p">=</span> <span class="s">"your_secret"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// These are specific to Video</span>
</span><span class="code-line">        <span class="k">const</span> <span class="kt">string</span> <span class="n">identity</span> <span class="p">=</span> <span class="s">"user"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create a Video grant for this token</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grant</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VideoGrant</span><span class="p">();</span>
</span><span class="code-line">        <span class="n">grant</span><span class="p">.</span><span class="n">Room</span> <span class="p">=</span> <span class="s">"cool room"</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="kt">var</span> <span class="n">grants</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">IGrant</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">grant</span> <span class="p">};</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="c1">// Create an Access Token generator</span>
</span><span class="code-line">        <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Token</span><span class="p">(</span>
</span><span class="code-line">            <span class="n">twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">identity</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span>
</span><span class="code-line">            <span class="n">grants</span><span class="p">:</span> <span class="n">grants</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">ToJwt</span><span class="p">());</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line"><span class="p">}</span>
</span></code></pre>
           <pre class="codehilite" data-ext="php" data-filename="video-example.5.x.php" data-version="default"><code><span class="code-line"><span class="cp">&lt;?php</span>
</span><span class="code-line"><span class="c1">// Get the PHP helper library from twilio.com/docs/php/install</span>
</span><span class="code-line"><span class="k">require_once</span> <span class="s1">'/path/to/vendor/autoload.php'</span><span class="p">;</span> <span class="c1">// Loads the library</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\AccessToken</span><span class="p">;</span>
</span><span class="code-line"><span class="k">use</span> <span class="nx">Twilio\Jwt\Grants\VideoGrant</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for all Twilio access tokens</span>
</span><span class="code-line"><span class="nv">$twilioAccountSid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiKey</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line"><span class="nv">$twilioApiSecret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Required for Video grant</span>
</span><span class="code-line"><span class="nv">$roomName</span> <span class="o">=</span> <span class="s1">'cool room'</span><span class="p">;</span>
</span><span class="code-line"><span class="c1">// An identifier for your app - can be anything you'd like</span>
</span><span class="code-line"><span class="nv">$identity</span> <span class="o">=</span> <span class="s1">'john_doe'</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create access token, which we will serialize and send to the client</span>
</span><span class="code-line"><span class="nv">$token</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AccessToken</span><span class="p">(</span>
</span><span class="code-line">    <span class="nv">$twilioAccountSid</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiKey</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$twilioApiSecret</span><span class="p">,</span>
</span><span class="code-line">    <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">    <span class="nv">$identity</span>
</span><span class="code-line"><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create Video grant</span>
</span><span class="code-line"><span class="nv">$videoGrant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VideoGrant</span><span class="p">();</span>
</span><span class="code-line"><span class="nv">$videoGrant</span><span class="o">-&gt;</span><span class="na">setRoom</span><span class="p">(</span><span class="nv">$roomName</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Add grant to token</span>
</span><span class="code-line"><span class="nv">$token</span><span class="o">-&gt;</span><span class="na">addGrant</span><span class="p">(</span><span class="nv">$videoGrant</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// render token to string</span>
</span><span class="code-line"><span class="k">echo</span> <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">toJWT</span><span class="p">();</span>
</span></code></pre>
           <pre class="codehilite" data-ext="rb" data-filename="video-example.5.x.rb" data-version="default"><code><span class="code-line"><span class="nb">require</span> <span class="s1">'twilio-ruby'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for any Twilio Access Token</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for Video</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create an Access Token</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class="code-line">  <span class="n">account_sid</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_key</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">api_secret</span><span class="p">,</span> 
</span><span class="code-line">  <span class="mi">3600</span><span class="p">,</span>
</span><span class="code-line">  <span class="n">identity</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Video grant for our token</span>
</span><span class="code-line"><span class="n">grant</span> <span class="o">=</span> <span class="no">Twilio</span><span class="o">::</span><span class="no">JWT</span><span class="o">::</span><span class="no">AccessToken</span><span class="o">::</span><span class="no">VideoGrant</span><span class="o">.</span><span class="n">new</span>
</span><span class="code-line"><span class="n">grant</span><span class="o">.</span><span class="n">room</span> <span class="o">=</span> <span class="s1">'cool room'</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Generate the token</span>
</span><span class="code-line"><span class="nb">puts</span> <span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span>
</span></code></pre>
           <pre class="codehilite" data-ext="py" data-filename="video-example.6.x.py" data-version="default"><code><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token</span> <span class="kn">import</span> <span class="n">AccessToken</span>
</span><span class="code-line"><span class="kn">from</span> <span class="nn">twilio.jwt.access_token.grants</span> <span class="kn">import</span> <span class="n">VideoGrant</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Required for all Twilio Access Tokens</span>
</span><span class="code-line"><span class="n">account_sid</span> <span class="o">=</span> <span class="s1">'ACxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_key</span> <span class="o">=</span> <span class="s1">'SKxxxxxxxxxxxx'</span>
</span><span class="code-line"><span class="n">api_secret</span> <span class="o">=</span> <span class="s1">'xxxxxxxxxxxxxx'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># required for Video grant</span>
</span><span class="code-line"><span class="n">identity</span> <span class="o">=</span> <span class="s1">'user'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create Access Token with credentials</span>
</span><span class="code-line"><span class="n">token</span> <span class="o">=</span> <span class="n">AccessToken</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="n">identity</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Create a Video grant and add to token</span>
</span><span class="code-line"><span class="n">video_grant</span> <span class="o">=</span> <span class="n">VideoGrant</span><span class="p">(</span><span class="n">room</span><span class="o">=</span><span class="s1">'cool room'</span><span class="p">)</span>
</span><span class="code-line"><span class="n">token</span><span class="o">.</span><span class="n">add_grant</span><span class="p">(</span><span class="n">video_grant</span><span class="p">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1"># Return token info as JSON</span>
</span><span class="code-line"><span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_jwt</span><span class="p">())</span>
</span></code></pre>
          </div>
          <div class="output-snippet-container">
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="footer" data-swiftype-index="false">
   <div class="uk-container uk-container-center">
    <div class="footer__statement">
     We can’t wait to see what you build.
    </div>
    <div class="uk-grid">
     <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
      <section class="footer__section">
       <header class="footer__header">
        Products
       </header>
       <ul class="footer__list">
        <li class="footer__list-item">
         <a class="footer__link" href="/voice-video">
          Voice &amp; Video
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/messaging">
          Messaging
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/authy">
          Authentication
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/wireless">
          Connected Devices
         </a>
        </li>
       </ul>
      </section>
     </div>
     <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
      <section class="footer__section">
       <header class="footer__header">
        Use Cases
       </header>
       <ul class="footer__list">
        <li class="footer__list-item">
         <a class="footer__link" href="/use-cases/access-security">
          Access Security
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/use-cases/contextual-call-center">
          Contextual Call Center
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/use-cases/marketplace-communications">
          Marketplace Communications
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/use-cases/mobile-messaging">
          Mobile Messaging
         </a>
        </li>
       </ul>
      </section>
     </div>
     <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
      <section class="footer__section">
       <header class="footer__header">
        About
       </header>
       <ul class="footer__list">
        <li class="footer__list-item">
         <a class="footer__link" href="/what-is-cloud-communications?">
          What is Twilio?
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="https://customers.twilio.com">
          Customers
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/help">
          Get Help
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/help/sales">
          Talk to Sales
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="/docs/glossary">
          Glossary
         </a>
        </li>
       </ul>
      </section>
     </div>
     <div class="uk-width-1-1 uk-width-medium-2-5">
      <section class="footer__section">
       <header class="footer__header">
        Hits From The Blog
       </header>
       <ul class="footer__list footer__list">
        <li class="footer__list-item">
         <a class="footer__link" href="https://www.twilio.com/blog/2017/05/copilot-just-got-even-smarter-announcing-smart-encoding.html">
          Copilot Just Got Even Smarter: Announcing Smart Encoding
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="https://www.twilio.com/blog/2017/05/know-the-moment-fb-leads-come-in-using-zapier-and-twilio.html">
          Know the Moment Facebook Leads Come In Using Zapier and Twilio
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="https://www.twilio.com/blog/2017/05/send-sms-text-messages-aws-lambda-python-3-6.html">
          How to Send SMS Text Messages with AWS Lambda and Python 3.6
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="https://www.twilio.com/blog/2017/05/signal-speaker-highlight-fun-facts.html">
          SIGNAL Speaker Highlight: Fun Facts
         </a>
        </li>
        <li class="footer__list-item">
         <a class="footer__link" href="https://www.twilio.com/blog/2017/05/programmable-chat-now-generally-available.html">
          Twilio Programmable Chat – Now Generally Available
         </a>
        </li>
       </ul>
      </section>
     </div>
    </div>
    <footer class="footer__footer">
     <div class="footer__logo" title="Twilio">
      <svg height="30" viewBox="0 0 30 30" width="30" xmlns="http://www.w3.org/2000/svg">
       <path d="M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11z">
       </path>
       <circle cx="18.7" cy="11.3" r="3.1">
       </circle>
       <circle cx="18.7" cy="18.7" r="3.1">
       </circle>
       <circle cx="11.3" cy="18.7" r="3.1">
       </circle>
       <circle cx="11.3" cy="11.3" r="3.1">
       </circle>
      </svg>
     </div>
     <ul class="legal__list">
      <li class="legal__list-item">
       <a class="legal__link" href="/company">
        About Twilio
       </a>
      </li>
      <li class="legal__list-item">
       <a class="legal__link" href="/legal">
        Legal
       </a>
      </li>
      <li class="legal__list-item">
       Copyright © 2016 Twilio, Inc.
       <br class="uk-visible-small"/>
       All Rights Reserved.
      </li>
     </ul>
    </footer>
   </div>
  </div>
  <script src="/docs/static/js/vendor.min.33039714f62f.js">
  </script>
  <!-- Mixpanel -->
  <script type="text/javascript">
   (function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
  typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
    e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
    mixpanel.init("f71c19735fa6ecc5225ff563285e1794");
  </script>
  <!-- Heap -->
  <script type="text/javascript">
   window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
    heap.load('1541905715');
  </script>
  <!-- GA -->
  <script type="text/javascript">
   try {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2900316-1']);
      _gaq.push(['_setSiteSpeedSampleRate', 50]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    } catch(err) {}

    var _kmq = _kmq || [];
  </script>
  <!-- Eloqua -->
  <script type="text/javascript">
   var _elqQ = _elqQ || [];
    _elqQ.push(['elqSetSiteId', '815114181']);
    _elqQ.push(['elqTrackPageView']);
    _elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);

    (function () {
      function async_load() {
        var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
        s.src = '//img03.en25.com/i/elqCfg.min.js';
        var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
      }
      if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
      else if (window.attachEvent) window.attachEvent('onload', async_load);
    })();
  </script>
  <!-- Transifex -->
  <script type="text/javascript">
   window.liveSettings = {
      api_key: '4c06c1c5a6b341e591d969476fe2675f'
    };
  </script>
  <script src="//cdn.transifex.com/live.js" type="text/javascript">
  </script>
  <style>
   .txlive-langselector { display: none; }
  </style>
  <script src="/docs/static/js/docs.min.df8ca94d404e.js">
  </script>
 </body>
</html>